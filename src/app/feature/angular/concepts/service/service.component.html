<section class="p-4 text-sm">
  <p class="heading-1 mb-2">
    Services
  </p>

  <div class="text-content">
    <p>
      <span class="text-zinc-50 tw-font-medium">Services</span>
      in Angular 19 are specialized classes that implement reusable business logic, data access, and cross-cutting concerns. With Angular 19's signal-based architecture, functional providers, and enhanced dependency injection system, services now offer improved reactivity, better performance in zoneless applications, and simplified integration with standalone components.
    </p>

    <br>

    <div class="flex flex-col">
      <div class="flex border-b border-gray-200">
        <button (click)="selectedTab = 1" [class.text-rose-300]="selectedTab===1" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Notes
        </button>
        <button (click)="selectedTab = 2" [class.text-rose-300]="selectedTab===2" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Best Practices
        </button>
        <button (click)="selectedTab = 3" [class.text-rose-300]="selectedTab===3" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Pros and Cons
        </button>
        <button (click)="selectedTab = 4" [class.text-rose-300]="selectedTab===4" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Related Topics
        </button>
      </div>
      <div class="p-4">
        <ng-container [ngSwitch]="selectedTab">
          <div *ngSwitchCase="2">
            <ng-container *ngTemplateOutlet="bestRef;"></ng-container>
          </div>
          <div *ngSwitchCase="3">
            <ng-container *ngTemplateOutlet="prosConsRef;"></ng-container>
          </div>
          <div *ngSwitchCase="4">
            <ng-container *ngTemplateOutlet="topicsRef"></ng-container>
          </div>
          <div *ngSwitchDefault>
            <ng-container *ngTemplateOutlet="notesRef"></ng-container>
          </div>
        </ng-container>
      </div>
    </div>
  </div>
</section>

<ng-template #notesRef>
  <p>Understanding Angular Services</p>
  <ul class="list-disc pl-4 text-sm">
    <li>
      <strong>Definition</strong>:
      Classes that encapsulate reusable business logic, data access, and application-wide functionality separate from components.
    </li>
    <li>
      <strong>Purpose</strong>:
      Provide a way to share information and functionality across components while adhering to the separation of concerns principle.
    </li>
    <li>
      <strong>Dependency Injection</strong>:
      Services are typically consumed through Angular's dependency injection system, promoting loose coupling and testability.
    </li>
    <li>
      <strong>Singleton Pattern</strong>:
      By default, services configured with providedIn: 'root' follow the singleton pattern, ensuring a single instance is shared application-wide.
    </li>
  </ul>

  <br>
  <br>

  <p>Service Features in Angular 19</p>
  <ol class="list-decimal pl-4 text-sm">
    <li>
      <strong>Signal-Based Reactivity</strong>:
      <ul class="list-disc pl-4">
        <li>Angular 19 introduces first-class integration between services and signals for reactive state management.</li>
        <li>Services can expose and manage state through signals for fine-grained reactivity without RxJS.</li>
        <li>Signal injection enables optimized dependency tracking between services and components.</li>
      </ul>
    </li>
    <li>
      <strong>Functional Providers</strong>:
      <ul class="list-disc pl-4">
        <li>Angular 19 supports functional service providers for more concise and type-safe configuration.</li>
        <li>Provider functions like provideHttpClient, provideRouter replace older module-based approaches.</li>
        <li>Environment injectors enable more flexible service scoping without NgModule.</li>
      </ul>
    </li>
    <li>
      <strong>Zoneless Optimizations</strong>:
      <ul class="list-disc pl-4">
        <li>Services can now operate in zoneless applications with improved performance characteristics.</li>
        <li>Signal-based service architecture eliminates the need for zone.js change detection in many cases.</li>
        <li>Reduced memory footprint and improved performance in service interactions.</li>
      </ul>
    </li>
    <li>
      <strong>Standalone Integration</strong>:
      <ul class="list-disc pl-4">
        <li>Seamless integration with standalone components without NgModule requirements.</li>
        <li>Improved tree-shaking for services in Angular 19's module-less architecture.</li>
        <li>More intuitive service registration with clearer provider scope visualization.</li>
      </ul>
    </li>
    <li>
      <strong>Enhanced Testing Features</strong>:
      <ul class="list-disc pl-4">
        <li>Improved TestBed configuration for service testing with functional providers.</li>
        <li>Better support for mocking dependencies in isolated service tests.</li>
        <li>More predictable test behavior with signal-based state management.</li>
      </ul>
    </li>
  </ol>

  <br>
  <br>

  <p>Types of Angular Services</p>
  <br>
  <table class="w-full border-collapse rounded-lg overflow-hidden shadow-md">
    <thead>
      <tr class="bg-gray-800 text-gray-100">
        <th class="py-3 px-4 text-left">Service Type</th>
        <th class="py-3 px-4 text-left">Purpose</th>
      </tr>
    </thead>
    <tbody>
      <tr class="border-b border-gray-700 bg-gray-900 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">Data Services</td>
        <td class="py-3 px-4">Manage application data, HTTP communication, and state management</td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-950 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">Feature Services</td>
        <td class="py-3 px-4">Implement specific application feature business logic</td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-900 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">Utility Services</td>
        <td class="py-3 px-4">Provide common utility functions and helpers</td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-950 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">Guard Services</td>
        <td class="py-3 px-4">Implement route guards for navigation protection</td>
      </tr>
    </tbody>
  </table>

  <br>
  <br>

  <p>Basic Service with Injectable Decorator</p>
  <button (click)="code1.hidden = !code1.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

  <span #code1 hidden copyToClipboard>
    <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
      <span>typescript</span>
      <span class="copy-button-wrapper bg-gray-700"></span>
    </div>

    <pre>
      <code
        [highlight]="code_1"
        [languages]="['typescript']">
      </code>
    </pre>
  </span>

  <br>
  <p>Signal-Based State Management in Services</p>
  <button (click)="code2.hidden = !code2.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

  <span #code2 hidden copyToClipboard>
    <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
      <span>typescript</span>
      <span class="copy-button-wrapper bg-gray-700"></span>
    </div>

    <pre>
      <code
        [highlight]="code_2"
        [languages]="['typescript']">
      </code>
    </pre>
  </span>

  <br>
  <p>Injectable Service Providers</p>
  <button (click)="code3.hidden = !code3.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

  <span #code3 hidden copyToClipboard>
    <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
      <span>typescript</span>
      <span class="copy-button-wrapper bg-gray-700"></span>
    </div>

    <pre>
      <code
        [highlight]="code_3"
        [languages]="['typescript']">
      </code>
    </pre>
  </span>

  <br>
  <p>Service Consumption in Components</p>
  <button (click)="code4.hidden = !code4.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

  <span #code4 hidden copyToClipboard>
    <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
      <span>typescript</span>
      <span class="copy-button-wrapper bg-gray-700"></span>
    </div>

    <pre>
      <code
        [highlight]="code_4"
        [languages]="['typescript']">
      </code>
    </pre>
  </span>

  <br>
  <p>Service Testing</p>
  <button (click)="code5.hidden = !code5.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

  <span #code5 hidden copyToClipboard>
    <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
      <span>typescript</span>
      <span class="copy-button-wrapper bg-gray-700"></span>
    </div>

    <pre>
      <code
        [highlight]="code_5"
        [languages]="['typescript']">
      </code>
    </pre>
  </span>
</ng-template>

<ng-template #bestRef>
  <ol class="list-decimal px-4 text-sm">
    <li>
      <strong class="text-sky-400">Follow Single Responsibility Principle</strong>
      <ul class="list-disc pl-4">
        <li>
          <strong>Focused Services</strong>:
          Create services that focus on a single responsibility or closely related set of tasks.
        </li>
        <li>
          <strong>Logical Grouping</strong>:
          Group related functionality within a service, but avoid creating monolithic services that handle too many concerns.
        </li>
      </ul>
    </li>
    <li>
      <strong class="text-sky-400">Use Appropriate Injection Scope</strong>
      <ul class="list-disc pl-4">
        <li>
          <strong>Root-level Services</strong>:
          Use providedIn: 'root' for application-wide singleton services that maintain state across the entire application.
        </li>
        <li>
          <strong>Component-level Services</strong>:
          Provide services at component level when the service state should be isolated to a specific feature or component tree.
        </li>
      </ul>
    </li>
    <li>
      <strong class="text-sky-400">Leverage Signal-Based Architecture</strong>
      <ul class="list-disc pl-4">
        <li>
          <strong>Signal State</strong>:
          Use signals for service state management to enable fine-grained reactivity and zoneless operation.
        </li>
        <li>
          <strong>Computed Values</strong>:
          Derive computed values from signals rather than storing derived state for better consistency.
        </li>
      </ul>
    </li>
    <li>
      <strong class="text-sky-400">Implement Proper Error Handling</strong>
      <ul class="list-disc pl-4">
        <li>
          <strong>Centralized Error Management</strong>:
          Handle errors consistently and provide meaningful error responses to consumers.
        </li>
        <li>
          <strong>Graceful Degradation</strong>:
          Design services to gracefully handle failures and recover when possible.
        </li>
      </ul>
    </li>
    <li>
      <strong class="text-sky-400">Design for Testability</strong>
      <ul class="list-disc pl-4">
        <li>
          <strong>Interface-based Design</strong>:
          Consider creating interfaces for services to facilitate mocking in tests.
        </li>
        <li>
          <strong>Dependency Injection</strong>:
          Accept dependencies through constructor injection to make testing easier.
        </li>
      </ul>
    </li>
  </ol>
</ng-template>

<ng-template #prosConsRef>
  <div class="flex flex-col gap-4">
    <div>
      <p class="font-semibold text-sky-400">Pros:</p>
      <ul class="list-disc pl-4 text-sm">
        <li>Promotes reusability and code organization</li>
        <li>Facilitates separation of concerns</li>
        <li>Enables dependency injection for better testability</li>
        <li>Provides a central location for shared business logic</li>
        <li>Makes state management more maintainable</li>
        <li>Reduces component complexity</li>
        <li>Improves application maintainability</li>
        <li>Works seamlessly with Angular's reactivity model</li>
      </ul>
    </div>
    <div>
      <p class="font-semibold text-sky-400">Cons:</p>
      <ul class="list-disc pl-4 text-sm">
        <li>Can become complex and hard to manage if responsibilities aren't clear</li>
        <li>Potential for overuse leading to too many small services</li>
        <li>May introduce tight coupling if not designed properly</li>
        <li>Lifecycle management can be challenging for services with resources</li>
        <li>Learning curve for understanding dependency injection patterns</li>
        <li>Potential for circular dependencies if not careful</li>
        <li>Testing complex service interactions can be challenging</li>
        <li>Performance impact from excessive service layers</li>
      </ul>
    </div>
  </div>
</ng-template>

<ng-template #topicsRef>
  <div class="grid grid-cols-2 gap-4 py-2">
    <div class="p-4 border border-gray-700 rounded-lg hover:bg-gray-800 transition-colors">
      <p class="font-medium text-sky-400">Dependency Injection</p>
      <p class="text-sm">Angular's system for providing dependencies to components and services</p>
    </div>
    <div class="p-4 border border-gray-700 rounded-lg hover:bg-gray-800 transition-colors">
      <p class="font-medium text-sky-400">Injectable Decorator</p>
      <p class="text-sm">Class decorator that marks a class as available for injection</p>
    </div>
    <div class="p-4 border border-gray-700 rounded-lg hover:bg-gray-800 transition-colors">
      <p class="font-medium text-sky-400">Hierarchical Injectors</p>
      <p class="text-sm">Angular's tree-like hierarchy of dependency injectors</p>
    </div>
    <div class="p-4 border border-gray-700 rounded-lg hover:bg-gray-800 transition-colors">
      <p class="font-medium text-sky-400">HttpClient</p>
      <p class="text-sm">Angular's HTTP service for performing web requests</p>
    </div>
    <div class="p-4 border border-gray-700 rounded-lg hover:bg-gray-800 transition-colors">
      <p class="font-medium text-sky-400">Signals</p>
      <p class="text-sm">Angular's reactive primitive for state management</p>
    </div>
    <div class="p-4 border border-gray-700 rounded-lg hover:bg-gray-800 transition-colors">
      <p class="font-medium text-sky-400">Environment Injectors</p>
      <p class="text-sm">Non-component injectors for managing service instances</p>
    </div>
  </div>
</ng-template>
