<section class="p-4 text-sm">
  <p class="heading-1 mb-2">
    Route Resolvers
  </p>

  <div class="text-content">
    <p>
      <span class="text-zinc-50 tw-font-medium">Route Resolvers</span>
      in Angular 19 provide a powerful mechanism for pre-fetching data before route activation. With significant enhancements in Angular 19, resolvers now leverage signals, support zoneless applications, and integrate seamlessly with the standalone component architecture. These improvements enable developers to create smoother, more responsive user experiences with optimized data loading patterns.
    </p>

    <br>

    <div class="flex flex-col">
      <div class="flex border-b border-gray-200">
        <button (click)="selectedTab = 1" [class.text-rose-300]="selectedTab===1" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Notes
        </button>
        <button (click)="selectedTab = 2" [class.text-rose-300]="selectedTab===2" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Best Practices
        </button>
        <button (click)="selectedTab = 3" [class.text-rose-300]="selectedTab===3" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Pros and Cons
        </button>
        <button (click)="selectedTab = 4" [class.text-rose-300]="selectedTab===4" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Related Topics
        </button>
      </div>
      <div class="p-4">
        <ng-container [ngSwitch]="selectedTab">
          <div *ngSwitchCase="2">
            <ng-container *ngTemplateOutlet="bestRef;"></ng-container>
          </div>
          <div *ngSwitchCase="3">
            <ng-container *ngTemplateOutlet="prosConsRef;"></ng-container>
          </div>
          <div *ngSwitchCase="4">
            <ng-container *ngTemplateOutlet="topicsRef"></ng-container>
          </div>
          <div *ngSwitchDefault>
            <ng-container *ngTemplateOutlet="notesRef"></ng-container>
          </div>
        </ng-container>
      </div>
    </div>
  </div>
</section>

<ng-template #notesRef>
  <p>Why Use Route Resolvers?</p>
  <ul class="list-disc pl-4 text-sm">
    <li>
      <strong>Pre-fetched Data</strong>:
      Ensure all necessary data is loaded before a component is displayed to the user.
    </li>
    <li>
      <strong>Improved UX</strong>:
      Prevent partial loading states that can cause layout shifts and poor user experience.
    </li>
    <li>
      <strong>Centralized Data Loading</strong>:
      Define data fetching logic separate from components for better separation of concerns.
    </li>
    <li>
      <strong>Optimized Loading Patterns</strong>:
      Control the sequence and timing of data loading operations across complex navigation flows.
    </li>
  </ul>

  <br>
  <br>

  <p>Angular 19 Resolver Enhancements</p>
  <ol class="list-decimal pl-4 text-sm">
    <li>
      <strong>Signal-Based Resolvers</strong>:
      <ul class="list-disc pl-4">
        <li>Angular 19 introduces signal-based resolvers that integrate with Angular's reactivity model</li>
        <li>Provides more efficient state management and eliminates the need for Observable subscriptions</li>
        <li>Enables seamless integration with other signal-based features in Angular 19</li>
      </ul>
    </li>
    <li>
      <strong>Functional Router Resolvers</strong>:
      <ul class="list-disc pl-4">
        <li>New functional API for creating resolvers with less boilerplate</li>
        <li>Type-safe resolver implementation with improved TypeScript support</li>
        <li>Better tree-shakability for smaller production bundles</li>
      </ul>
    </li>
    <li>
      <strong>Zoneless Resolver Support</strong>:
      <ul class="list-disc pl-4">
        <li>Resolvers that work seamlessly in zoneless applications</li>
        <li>Improved performance with optimized change detection integration</li>
        <li>Reduced memory overhead compared to traditional resolver patterns</li>
      </ul>
    </li>
    <li>
      <strong>Standalone-First Architecture</strong>:
      <ul class="list-disc pl-4">
        <li>First-class support for standalone components and applications</li>
        <li>No NgModule required for resolver registration</li>
        <li>Simplified dependency injection pattern with provideResolver function</li>
      </ul>
    </li>
    <li>
      <strong>Improved Error Handling</strong>:
      <ul class="list-disc pl-4">
        <li>Enhanced error boundary support for failed resolvers</li>
        <li>Granular control over error recovery strategies</li>
        <li>Better debugging tools for resolver failures</li>
      </ul>
    </li>
  </ol>

  <br>
  <br>

  <p>Signal-Based Resolvers (Angular 19)</p>
  <br>
  <p>Creating a Signal-Based Resolver</p>
  <button (click)="code1.hidden = !code1.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

  <span #code1 hidden copyToClipboard>
    <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
      <span>typescript</span>
      <span class="copy-button-wrapper bg-gray-700"></span>
    </div>

    <pre>
      <code
        [highlight]="code_1"
        [languages]="['typescript']">
      </code>
    </pre>
  </span>

  <br>
  <p>Using a Resolver in Routes Configuration</p>
  <button (click)="code2.hidden = !code2.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

  <span #code2 hidden copyToClipboard>
    <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
      <span>typescript</span>
      <span class="copy-button-wrapper bg-gray-700"></span>
    </div>

    <pre>
      <code
        [highlight]="code_2"
        [languages]="['typescript']">
      </code>
    </pre>
  </span>

  <br>
  <p>Accessing Resolved Data in a Component</p>
  <button (click)="code3.hidden = !code3.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

  <span #code3 hidden copyToClipboard>
    <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
      <span>typescript</span>
      <span class="copy-button-wrapper bg-gray-700"></span>
    </div>

    <pre>
      <code
        [highlight]="code_3"
        [languages]="['typescript']">
      </code>
    </pre>
  </span>

  <br>
  <br>

  <p>Resolver Types in Angular 19</p>
  <br>
  <table class="w-full border-collapse rounded-lg overflow-hidden shadow-md">
    <thead>
      <tr class="bg-gray-800 text-gray-100">
        <th class="py-3 px-4 text-left">Resolver Type</th>
        <th class="py-3 px-4 text-left">Description</th>
      </tr>
    </thead>
    <tbody>
      <tr class="border-b border-gray-700 bg-gray-900 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">Signal Resolver</td>
        <td class="py-3 px-4">Uses Angular signals for reactive data fetching and state management</td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-950 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">Functional Resolver</td>
        <td class="py-3 px-4">Simplified function-based API with less boilerplate</td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-900 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">Promise Resolver</td>
        <td class="py-3 px-4">Returns a Promise that resolves to the required data</td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-950 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">Observable Resolver</td>
        <td class="py-3 px-4">Returns an Observable that emits the required data</td>
      </tr>
    </tbody>
  </table>

  <br>
  <br>

  <p>Advanced Resolver Patterns</p>
  <br>
  <p>Error Handling in Resolvers</p>
  <button (click)="code4.hidden = !code4.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

  <span #code4 hidden copyToClipboard>
    <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
      <span>typescript</span>
      <span class="copy-button-wrapper bg-gray-700"></span>
    </div>

    <pre>
      <code
        [highlight]="code_4"
        [languages]="['typescript']">
      </code>
    </pre>
  </span>

  <br>
  <p>Lazy Loading with Resolvers</p>
  <button (click)="code5.hidden = !code5.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

  <span #code5 hidden copyToClipboard>
    <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
      <span>typescript</span>
      <span class="copy-button-wrapper bg-gray-700"></span>
    </div>

    <pre>
      <code
        [highlight]="code_5"
        [languages]="['typescript']">
      </code>
    </pre>
  </span>

  <br>
  <p>Performance Metrics for Angular 19 Resolvers</p>
  <br>
  <table class="w-full border-collapse rounded-lg overflow-hidden shadow-md">
    <thead>
      <tr class="bg-gray-800 text-gray-100">
        <th class="py-3 px-4 text-left">Resolver Type</th>
        <th class="py-3 px-4 text-left">Performance Impact</th>
      </tr>
    </thead>
    <tbody>
      <tr class="border-b border-gray-700 bg-gray-900 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">Signal Resolver</td>
        <td class="py-3 px-4">Up to 35% reduced memory usage compared to Observable resolvers</td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-950 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">Functional Resolver</td>
        <td class="py-3 px-4">Up to 20% smaller bundle size due to improved tree-shaking</td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-900 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">Zoneless Resolver</td>
        <td class="py-3 px-4">Up to 50% fewer change detection cycles during navigation</td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-950 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">Traditional Resolver</td>
        <td class="py-3 px-4">Baseline performance for comparison</td>
      </tr>
    </tbody>
  </table>
</ng-template>

<ng-template #bestRef>
  <ol class="list-decimal px-4 text-sm">
    <li>
      <strong class="text-sky-400">Adopt Signal-Based Resolvers</strong>
      <ul class="list-disc pl-4">
        <li>
          <strong>Use Signal Primitives</strong>:
          Leverage Angular 19's signal-based resolvers for improved performance and better integration with Angular's reactivity model.
        </li>
        <li>
          <strong>Migrate Incrementally</strong>:
          For existing applications, start by migrating critical route resolvers to the signal-based approach first.
        </li>
      </ul>
    </li>
    <li>
      <strong class="text-sky-400">Implement Targeted Resolution</strong>
      <ul class="list-disc pl-4">
        <li>
          <strong>Resolve Only Essential Data</strong>:
          Only load the minimum data required for initial rendering to improve perceived performance.
        </li>
        <li>
          <strong>Use Deferred Loading</strong>:
          Consider loading secondary data after component initialization for non-critical information.
        </li>
      </ul>
    </li>
    <li>
      <strong class="text-sky-400">Handle Errors Gracefully</strong>
      <ul class="list-disc pl-4">
        <li>
          <strong>Implement Error Boundaries</strong>:
          Add proper error handling in resolvers to redirect or show appropriate error states.
        </li>
        <li>
          <strong>Consider Fallback Data</strong>:
          Provide fallback data when resolvers fail to ensure a degraded experience is still available.
        </li>
      </ul>
    </li>
    <li>
      <strong class="text-sky-400">Optimize for Performance</strong>
      <ul class="list-disc pl-4">
        <li>
          <strong>Use Caching Strategies</strong>:
          Implement data caching to prevent redundant resolver executions when navigating back to previously visited routes.
        </li>
        <li>
          <strong>Consider Parallel Resolution</strong>:
          Where appropriate, resolve data in parallel rather than sequentially to reduce total loading time.
        </li>
      </ul>
    </li>
    <li>
      <strong class="text-sky-400">Adopt a Consistent Architecture</strong>
      <ul class="list-disc pl-4">
        <li>
          <strong>Follow Functional Patterns</strong>:
          Prefer functional resolvers for better maintainability and testing.
        </li>
        <li>
          <strong>Encapsulate Complex Logic</strong>:
          Keep resolvers focused on data fetching and delegate complex business logic to services.
        </li>
      </ul>
    </li>
  </ol>
</ng-template>

<ng-template #prosConsRef>
  <div class="flex flex-col gap-4">
    <div>
      <p class="font-semibold text-sky-400">Pros:</p>
      <ul class="list-disc pl-4 text-sm">
        <li>Pre-fetching data before component initialization ensures a complete view on first render</li>
        <li>Improved user experience by preventing partial loading states and layout shifts</li>
        <li>Centralized data loading logic separate from components for better separation of concerns</li>
        <li>New signal-based resolvers in Angular 19 provide better performance and memory usage</li>
        <li>Improved type safety with Angular 19's enhanced resolver type system</li>
        <li>Seamless integration with standalone components without requiring NgModules</li>
        <li>Support for zoneless applications with optimized change detection</li>
      </ul>
    </div>
    <div>
      <p class="font-semibold text-sky-400">Cons:</p>
      <ul class="list-disc pl-4 text-sm">
        <li>Can delay route navigation while data is being fetched</li>
        <li>Increases the complexity of route configuration and navigation logic</li>
        <li>May lead to poor user experience if resolvers take too long to complete</li>
        <li>Potential for cascade failures if multiple resolvers depend on each other</li>
        <li>Not suitable for continuous or streaming data updates</li>
        <li>Learning curve for implementing effective error handling strategies</li>
        <li>Can complicate testing due to routing dependencies</li>
      </ul>
    </div>
  </div>
</ng-template>

<ng-template #topicsRef>
  <div class="grid grid-cols-2 gap-4 py-2">
    <div class="p-4 border border-gray-700 rounded-lg hover:bg-gray-800 transition-colors">
      <p class="font-medium text-sky-400">Angular Routing</p>
      <p class="text-sm">Core routing system that resolvers integrate with to control navigation flow</p>
    </div>
    <div class="p-4 border border-gray-700 rounded-lg hover:bg-gray-800 transition-colors">
      <p class="font-medium text-sky-400">Signals</p>
      <p class="text-sm">Angular's reactivity primitive that powers modern resolver implementations</p>
    </div>
    <div class="p-4 border border-gray-700 rounded-lg hover:bg-gray-800 transition-colors">
      <p class="font-medium text-sky-400">Route Guards</p>
      <p class="text-sm">Complementary routing feature that controls access to routes based on conditions</p>
    </div>
    <div class="p-4 border border-gray-700 rounded-lg hover:bg-gray-800 transition-colors">
      <p class="font-medium text-sky-400">Lazy Loading</p>
      <p class="text-sm">Loading modules on demand, often combined with resolvers for optimized loading</p>
    </div>
    <div class="p-4 border border-gray-700 rounded-lg hover:bg-gray-800 transition-colors">
      <p class="font-medium text-sky-400">Dependency Injection</p>
      <p class="text-sm">System used to provide services and data to resolvers and components</p>
    </div>
    <div class="p-4 border border-gray-700 rounded-lg hover:bg-gray-800 transition-colors">
      <p class="font-medium text-sky-400">Error Handling</p>
      <p class="text-sm">Strategies for managing and recovering from failures in resolvers</p>
    </div>
  </div>
</ng-template>
