<section class="p-4 text-sm">
  <p class="heading-1 mb-2">
    Template Reference Variables
  </p>

  <div class="text-content">
    <p>
      <span class="text-zinc-50 tw-font-medium">Template Reference Variables</span>
      in Angular 19 are special variables that give you direct access to DOM elements, components, or directives from within your template. With the latest version's enhanced type support and integration with signals, these references provide type-safe access to elements and improved performance in reactive applications.
    </p>

    <br>

    <div class="flex flex-col">
      <div class="flex border-b border-gray-200">
        <button  (click)="selectedTab = 1" [class.text-rose-300]="selectedTab===1" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Notes
        </button>
        <button  (click)="selectedTab = 2" [class.text-rose-300]="selectedTab===2" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Best Practices
        </button>
        <button  (click)="selectedTab = 3" [class.text-rose-300]="selectedTab===3" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Pros and Cons
        </button>
        <button  (click)="selectedTab = 4" [class.text-rose-300]="selectedTab===4" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Related Topics
        </button>
      </div>
      <div class="p-4">
        <ng-container [ngSwitch]="selectedTab">
          <div *ngSwitchCase="2">
            <ng-container *ngTemplateOutlet="bestRef;"></ng-container>
          </div>
          <div *ngSwitchCase="3">
            <ng-container *ngTemplateOutlet="prosConsRef;"></ng-container>
          </div>
          <div *ngSwitchCase="4">
            <ng-container *ngTemplateOutlet="topicsRef"></ng-container>
          </div>
          <div *ngSwitchDefault>
            <ng-container *ngTemplateOutlet="notesRef"></ng-container>
          </div>
        </ng-container>
      </div>
    </div>

  </div>
</section>


<ng-template #notesRef>
  <p>Understanding Template Reference Variables</p>
  <ul class="list-disc pl-4 text-sm">
    <li>
      <strong>Definition</strong>:
      Template reference variables are declared using the hash symbol (#) and provide a way to access DOM elements, components, or directives directly in your template.
    </li>
    <li>
      <strong>Syntax</strong>:
      Declared using the syntax <code>#variableName</code> on an HTML element, component, or directive.
    </li>
    <li>
      <strong>Scope</strong>:
      Available for use within the entire template but not in the component class unless explicitly passed.
    </li>
    <li>
      <strong>Usage</strong>:
      Used for direct DOM manipulation, accessing component APIs, and creating more interactive templates.
    </li>
  </ul>

  <br>
  <br>

  <p>Angular 19 Enhancements for Template Reference Variables</p>
  <ol class="list-decimal pl-4 text-sm">
    <li>
      <strong>Enhanced Type Safety</strong>:
      <ul class="list-disc pl-4">
        <li>Angular 19 provides improved type inference for template reference variables, making it easier to work with them in a type-safe manner.</li>
      </ul>
    </li>
    <li>
      <strong>Signal Integration</strong>:
      <ul class="list-disc pl-4">
        <li>Reference variables now work seamlessly with signals, allowing for more reactive template interactions without performance penalties.</li>
      </ul>
    </li>
    <li>
      <strong>Control Flow Compatibility</strong>:
      <ul class="list-disc pl-4">
        <li>Template reference variables integrate smoothly with the new block-based control flow syntax (&#64;if, &#64;for, &#64;switch) for improved template organization.</li>
      </ul>
    </li>
    <li>
      <strong>Deferred Block Integration</strong>:
      <ul class="list-disc pl-4">
        <li>References can be used with deferred loading blocks, providing finer control over when and how content is rendered.</li>
      </ul>
    </li>
    <li>
      <strong>Static Resolution Improvements</strong>:
      <ul class="list-disc pl-4">
        <li>Angular 19 resolves template references more efficiently at compile time, reducing runtime overhead and improving application performance.</li>
      </ul>
    </li>
  </ol>

  <br>
  <br>

  <p>Common Usage Patterns</p>
  <ol class="list-decimal pl-4 text-sm">
    <li>
      Basic DOM Element Reference

      <button (click)="code1.hidden = !code1.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

      <span #code1 hidden copyToClipboard>
        <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
          <span>html</span>
          <span class="copy-button-wrapper bg-gray-700"></span>
        </div>

        <pre>
          <code
            [highlight]="code_1"
            [languages]="['html']">
          </code>
        </pre>
      </span>

    </li>
    <li>
      Component Reference

      <button (click)="code2.hidden = !code2.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

      <span #code2 hidden copyToClipboard>
        <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
          <span>html</span>
          <span class="copy-button-wrapper bg-gray-700"></span>
        </div>

        <pre>
          <code
            [highlight]="code_2"
            [languages]="['html']">
          </code>
        </pre>
      </span>

    </li>
    <li>
      Directive Reference

      <button (click)="code3.hidden = !code3.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

      <span #code3 hidden copyToClipboard>
        <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
          <span>html</span>
          <span class="copy-button-wrapper bg-gray-700"></span>
        </div>

        <pre>
          <code
            [highlight]="code_3"
            [languages]="['html']">
          </code>
        </pre>
      </span>

    </li>
    <li>
      Accessing Variables from TypeScript

      <button (click)="code4.hidden = !code4.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

      <span #code4 hidden copyToClipboard>
        <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
          <span>typescript</span>
          <span class="copy-button-wrapper bg-gray-700"></span>
        </div>

        <pre>
          <code
            [highlight]="code_4"
            [languages]="['typescript']">
          </code>
        </pre>
      </span>

    </li>
    <li>
      Template Reference with Signals

      <button (click)="code5.hidden = !code5.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

      <span #code5 hidden copyToClipboard>
        <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
          <span>typescript</span>
          <span class="copy-button-wrapper bg-gray-700"></span>
        </div>

        <pre>
          <code
            [highlight]="code_5"
            [languages]="['typescript']">
          </code>
        </pre>
      </span>

    </li>
    <li>
      With New Control Flow

      <button (click)="code6.hidden = !code6.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

      <span #code6 hidden copyToClipboard>
        <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
          <span>html</span>
          <span class="copy-button-wrapper bg-gray-700"></span>
        </div>

        <pre>
          <code
            [highlight]="code_6"
            [languages]="['html']">
          </code>
        </pre>
      </span>

    </li>
    <li>
      With Deferred Loading

      <button (click)="code7.hidden = !code7.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

      <span #code7 hidden copyToClipboard>
        <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
          <span>html</span>
          <span class="copy-button-wrapper bg-gray-700"></span>
        </div>

        <pre>
          <code
            [highlight]="code_7"
            [languages]="['html']">
          </code>
        </pre>
      </span>

    </li>
    <li>
      Working with Forms

      <button (click)="code8.hidden = !code8.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

      <span #code8 hidden copyToClipboard>
        <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
          <span>html</span>
          <span class="copy-button-wrapper bg-gray-700"></span>
        </div>

        <pre>
          <code
            [highlight]="code_8"
            [languages]="['html']">
          </code>
        </pre>
      </span>

    </li>
  </ol>

  <br>
  <br>

  <p>Reference Resolution Rules</p>
  <table class="w-full border-collapse rounded-lg overflow-hidden shadow-md">
    <thead>
      <tr class="bg-gray-800 text-gray-100">
        <th class="py-3 px-4 text-left">Target Type</th>
        <th class="py-3 px-4 text-left">What Variable References</th>
        <th class="py-3 px-4 text-left">Example</th>
      </tr>
    </thead>
    <tbody>
      <tr class="border-b border-gray-700 bg-gray-900 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">HTML Element</td>
        <td class="py-3 px-4">DOM element instance</td>
        <td class="py-3 px-4"><code>&lt;div #myDiv&gt;...&lt;/div&gt;</code></td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-950 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">Component</td>
        <td class="py-3 px-4">Component instance</td>
        <td class="py-3 px-4"><code>&lt;app-child #child&gt;&lt;/app-child&gt;</code></td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-900 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">Directive</td>
        <td class="py-3 px-4">Directive instance</td>
        <td class="py-3 px-4"><code>&lt;div [appMyDir]="data" #dir="appMyDir"&gt;</code></td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-950 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">TemplateRef</td>
        <td class="py-3 px-4">TemplateRef instance</td>
        <td class="py-3 px-4"><code>&lt;ng-template #tmpl&gt;...&lt;/ng-template&gt;</code></td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-900 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">Form control</td>
        <td class="py-3 px-4">NgModel or FormControl</td>
        <td class="py-3 px-4"><code>&lt;input [(ngModel)]="name" #nameCtrl="ngModel"&gt;</code></td>
      </tr>
    </tbody>
  </table>

</ng-template>


<ng-template #bestRef>
  <ol class="list-decimal px-4 text-sm">
    <li>
      <strong class="text-sky-400">Optimize DOM Manipulation</strong>
      <ul class="list-disc pl-4">
        <li>
          <strong>Prefer Angular Way Over Direct DOM Access</strong>:
          While template references give you direct DOM access, prefer Angular's declarative approach (property binding, event binding) over direct DOM manipulation when possible.
        </li>
        <li>
          <strong>Use @ViewChild for TypeScript Access</strong>:
          When you need to access elements from your component class, use @ViewChild with appropriate typing rather than passing references through events.
        </li>
        <li>
          <strong>Leverage Static Resolution</strong>:
          For references that are available when the view initializes, use the static option with @ViewChild for earlier access (in ngOnInit instead of ngAfterViewInit).
        </li>
      </ul>
    </li>
    <li>
      <strong class="text-sky-400">Enhance Type Safety</strong>:
      <ul class="list-disc pl-4">
        <li>
          <strong>Specify Correct Type</strong>:
          When using @ViewChild, always specify the correct type to ensure type safety and better IDE support.
        </li>
        <li>
          <strong>Use Explicit Export As</strong>:
          For directives, use explicit exportAs in the directive definition and reference it with #var="exportedName" for clear type resolution.
        </li>
        <li>
          <strong>Enable strictTemplates</strong>:
          Enable Angular's strict template type checking to catch reference variable errors during development.
        </li>
      </ul>
    </li>
    <li>
      <strong class="text-sky-400">Improve Code Organization</strong>:
      <ul class="list-disc pl-4">
        <li>
          <strong>Use Descriptive Names</strong>:
          Give your template reference variables meaningful names that describe their purpose, not just their type.
        </li>
        <li>
          <strong>Keep References Local</strong>:
          Use template reference variables in the closest scope where they're needed, minimizing their exposure throughout the template.
        </li>
        <li>
          <strong>Avoid Overuse</strong>:
          Don't create references for every element. Only create them when needed for interaction or to access specific properties.
        </li>
      </ul>
    </li>
    <li>
      <strong class="text-sky-400">Optimize for Performance</strong>:
      <ul class="list-disc pl-4">
        <li>
          <strong>Signal Integration</strong>:
          When working with references that change, consider integrating them with signals for more efficient reactivity.
        </li>
        <li>
          <strong>Query Lists</strong>:
          For multiple similar references (like list items), use @ViewChildren with QueryList for better performance with large collections.
        </li>
        <li>
          <strong>Lazy Initialization</strong>:
          Use Angular 19's @defer blocks for lazy content that contains template references to improve initial load performance.
        </li>
      </ul>
    </li>
    <li>
      <strong class="text-sky-400">Common Patterns</strong>:
      <ul class="list-disc pl-4">
        <li>
          <strong>Form Access</strong>:
          For form elements, use reference variables to access validators and control states locally in the template rather than component properties.
        </li>
        <li>
          <strong>Parent-Child Communication</strong>:
          For simple parent-child communication without Input/Output, use reference variables to directly call child component methods.
        </li>
        <li>
          <strong>Template Outlets</strong>:
          Use reference variables with ng-template and ngTemplateOutlet for flexible, reusable template patterns.
        </li>
      </ul>
    </li>
  </ol>
</ng-template>


<ng-template #prosConsRef>
  <strong class="text-sky-400">
    Pros:
  </strong>

  <br>

  <ol class="list-decimal px-10 text-sm">
    <li>
      Provides direct access to DOM elements, components, and directives without complex queries.
    </li>
    <li>
      Enables more interactive templates by allowing elements to reference and communicate with each other.
    </li>
    <li>
      In Angular 19, offers enhanced type safety and better integration with the new control flow syntax.
    </li>
    <li>
      Simplifies form management by providing easy access to form controls and validation states.
    </li>
    <li>
      With signals integration, enables more reactive patterns without performance penalties.
    </li>
  </ol>

  <br>

  <strong class="text-sky-400">
    Cons:
  </strong>

  <br>

  <ol class="list-decimal px-10 text-sm">
    <li>
      Can encourage direct DOM manipulation, which may go against Angular's declarative approach.
    </li>
    <li>
      Limited to template scope unless explicitly passed to component class via methods or @ViewChild.
    </li>
    <li>
      Overuse can make templates harder to read and maintain as references create implicit dependencies.
    </li>
    <li>
      Type information can be lost when working with general HTML elements without proper casting.
    </li>
    <li>
      Using references across templates via complex patterns can make code harder to reason about.
    </li>
  </ol>


  <br>

  <p>
    Template reference variables in Angular 19 offer powerful capabilities for creating interactive templates with direct access to elements and components. While they can lead to more imperative code if overused, the enhanced type safety and signal integration in the latest version make them more maintainable and performant than ever before. When used judiciously, they provide an elegant solution for template-level interactions without excessive component communication.
  </p>

</ng-template>


<ng-template #topicsRef>
  <p>
    Related topics to Angular 19 Template Reference Variables:
  </p>

  <br>

  <ol class="list-decimal px-10 text-sm">
    <li>
      <strong>ViewChild and ViewChildren</strong>
      <p>
        Angular decorators that provide access to template reference variables and DOM elements from the component class.
      </p>
    </li>
    <li>
      <strong>QueryList</strong>
      <p>
        A collection type used with ViewChildren that provides an observable interface for tracking changes to a set of references.
      </p>
    </li>
    <li>
      <strong>Content Projection</strong>
      <p>
        Working with content from parent components, often using template references to access and manipulate projected content.
      </p>
    </li>
    <li>
      <strong>Control Flow Blocks</strong>
      <p>
        Angular 19's new @if, @for, and @switch syntax, which can be used alongside template reference variables for enhanced templates.
      </p>
    </li>
    <li>
      <strong>NgTemplateOutlet</strong>
      <p>
        A directive that renders an embedded view from a prepared template, often accessed via template reference variables.
      </p>
    </li>
    <li>
      <strong>Signal-Based Components</strong>
      <p>
        Angular 19's approach to reactive components that work well with template reference variables for fine-grained updates.
      </p>
    </li>
    <li>
      <strong>Deferred Loading</strong>
      <p>
        Using @defer blocks with template references to lazily load parts of your application for better performance.
      </p>
    </li>
  </ol>
</ng-template>
