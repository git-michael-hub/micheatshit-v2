<section class="p-4 text-sm">
  <p class="heading-1 mb-2">
    Structural Directives
  </p>

  <div class="text-content">
    <p>
      <span class="text-zinc-50 tw-font-medium">Structural Directives</span>
      in Angular 19 shape the DOM structure by adding, removing, or manipulating elements. With Angular 19's modern control flow syntax and optimized directive architecture, structural directives now offer improved performance, better type checking, and more intuitive templates.
    </p>

    <br>

    <div class="flex flex-col">
      <div class="flex border-b border-gray-200">
        <button (click)="selectedTab = 1" [class.text-rose-300]="selectedTab===1" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Notes
        </button>
        <button (click)="selectedTab = 2" [class.text-rose-300]="selectedTab===2" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Pros and Cons
        </button>
        <button (click)="selectedTab = 3" [class.text-rose-300]="selectedTab===3" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Related Topics
        </button>
      </div>
      <div class="p-4">
        <ng-container [ngSwitch]="selectedTab">
          <div *ngSwitchCase="2">
            <ng-container *ngTemplateOutlet="prosConsRef;"></ng-container>
          </div>
          <div *ngSwitchCase="3">
            <ng-container *ngTemplateOutlet="topicsRef"></ng-container>
          </div>
          <div *ngSwitchDefault>
            <ng-container *ngTemplateOutlet="notesRef"></ng-container>
          </div>
        </ng-container>
      </div>
    </div>
  </div>
</section>

<ng-template #notesRef>
  <p>Understanding Structural Directives</p>
  <ul class="list-disc pl-4 text-sm">
    <li>
      <strong>Definition</strong>:
      Directives that shape or reshape the DOM structure by adding, removing, or manipulating HTML elements.
    </li>
    <li>
      <strong>Syntax</strong>:
      Denoted with an asterisk (*) prefix in traditional syntax, indicating they operate on the host element and its children.
    </li>
    <li>
      <strong>Angular 19 Control Flow</strong>:
      Now includes built-in control flow blocks that can replace traditional structural directives with more intuitive syntax.
    </li>
    <li>
      <strong>Core Purpose</strong>:
      Enable conditional rendering, list iteration, and template manipulation for dynamic UI.
    </li>
  </ul>

  <br>
  <p>Angular 19 Structural Directive Improvements</p>
  <ol class="list-decimal pl-4 text-sm">
    <li>
      <strong>Built-in Control Flow</strong>:
      <ul class="list-disc pl-4">
        <li>Angular 19 introduces a completely new control flow syntax for more performant alternatives to traditional structural directives.</li>
        <li>Better type checking and code completion for template variables.</li>
        <li>More efficient change detection with fine-grained updates.</li>
      </ul>
    </li>
    <li>
      <strong>Zoneless Optimization</strong>:
      <ul class="list-disc pl-4">
        <li>Structural directives now work efficiently in zoneless applications with improved performance.</li>
        <li>Reduced CPU overhead when manipulating large DOM structures.</li>
        <li>Better integration with signal-based reactivity for fine-grained control.</li>
      </ul>
    </li>
  </ol>

  <br>
  <p>Common Structural Directives</p>
  <br>
  <table class="w-full border-collapse rounded-lg overflow-hidden shadow-md">
    <thead>
      <tr class="bg-gray-800 text-gray-100">
        <th class="py-3 px-4 text-left">Directive</th>
        <th class="py-3 px-4 text-left">Traditional Syntax</th>
        <th class="py-3 px-4 text-left">Angular 19 Syntax</th>
      </tr>
    </thead>
    <tbody>
      <tr class="border-b border-gray-700 bg-gray-900 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">Conditional</td>
        <td class="py-3 px-4">*ngIf="condition"</td>
        <td class="py-3 px-4">if (condition)</td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-950 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">Iteration</td>
        <td class="py-3 px-4">*ngFor="let item of items"</td>
        <td class="py-3 px-4">for (item of items)</td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-900 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">Switch</td>
        <td class="py-3 px-4">*ngSwitchCase="value"</td>
        <td class="py-3 px-4">switch cases</td>
      </tr>
    </tbody>
  </table>

  <br>
  <p>*ngIf - Conditional Rendering</p>
  <button (click)="code1.hidden = !code1.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

  <span #code1 hidden copyToClipboard>
    <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
      <span>html</span>
      <span class="copy-button-wrapper bg-gray-700"></span>
    </div>

    <pre>
      <code
        [highlight]="code_1"
        [languages]="['html']">
      </code>
    </pre>
  </span>

  <br>
  <p>*ngFor - List Iteration</p>
  <button (click)="code2.hidden = !code2.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

  <span #code2 hidden copyToClipboard>
    <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
      <span>html</span>
      <span class="copy-button-wrapper bg-gray-700"></span>
    </div>

    <pre>
      <code
        [highlight]="code_2"
        [languages]="['html']">
      </code>
    </pre>
  </span>
</ng-template>

<ng-template #prosConsRef>
  <div class="flex flex-col gap-4">
    <div>
      <p class="font-semibold text-sky-400">Pros:</p>
      <ul class="list-disc pl-4 text-sm">
        <li>Enables dynamic DOM manipulation based on application state</li>
        <li>Simplifies conditional rendering and list iteration in templates</li>
        <li>Angular 19's new control flow syntax improves performance</li>
        <li>Built-in type checking improves developer experience</li>
        <li>Better tree-shaking reduces final bundle size</li>
      </ul>
    </div>
    <div>
      <p class="font-semibold text-sky-400">Cons:</p>
      <ul class="list-disc pl-4 text-sm">
        <li>Learning curve for understanding template microsyntax</li>
        <li>Potential performance issues when misused (missing trackBy/track)</li>
        <li>Complex nested directives can be hard to debug</li>
        <li>Limited debugging tools compared to component-based logic</li>
      </ul>
    </div>
  </div>
</ng-template>

<ng-template #topicsRef>
  <div class="grid grid-cols-2 gap-4 py-2">
    <div class="p-4 border border-gray-700 rounded-lg hover:bg-gray-800 transition-colors">
      <p class="font-medium text-sky-400">Angular Control Flow</p>
      <p class="text-sm">New built-in template syntax for conditional and iterative rendering</p>
    </div>
    <div class="p-4 border border-gray-700 rounded-lg hover:bg-gray-800 transition-colors">
      <p class="font-medium text-sky-400">Custom Directives</p>
      <p class="text-sm">Creating reusable structural directives for application-specific needs</p>
    </div>
    <div class="p-4 border border-gray-700 rounded-lg hover:bg-gray-800 transition-colors">
      <p class="font-medium text-sky-400">Template Context</p>
      <p class="text-sm">Using and accessing contextual variables in templates</p>
    </div>
    <div class="p-4 border border-gray-700 rounded-lg hover:bg-gray-800 transition-colors">
      <p class="font-medium text-sky-400">Microsyntax</p>
      <p class="text-sm">The special syntax used by structural directives</p>
    </div>
  </div>
</ng-template>
