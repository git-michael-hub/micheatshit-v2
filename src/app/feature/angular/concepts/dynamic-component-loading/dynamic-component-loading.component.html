<section class="p-4 text-sm">
  <p class="heading-1 mb-2">
    Dynamic Component Loading
  </p>

  <div class="text-content">
    <p>
      <span class="text-zinc-50 tw-font-medium">Dynamic Component Loading</span>
      in Angular 19 is a powerful technique that allows developers to load, instantiate, and render components at runtime rather than at compile time. Angular 19 introduces significant improvements to this process with enhanced ViewContainerRef APIs, better integration with signals, standalone component support, and new defer block syntax for more efficient and declarative dynamic component loading patterns.
    </p>

    <br>

    <div class="flex flex-col">
      <div class="flex border-b border-gray-200">
        <button (click)="selectedTab = 1" [class.text-rose-300]="selectedTab===1" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Notes
        </button>
        <button (click)="selectedTab = 2" [class.text-rose-300]="selectedTab===2" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Best Practices
        </button>
        <button (click)="selectedTab = 3" [class.text-rose-300]="selectedTab===3" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Pros and Cons
        </button>
        <button (click)="selectedTab = 4" [class.text-rose-300]="selectedTab===4" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Related Topics
        </button>
      </div>
      <div class="p-4">
        <ng-container [ngSwitch]="selectedTab">
          <div *ngSwitchCase="2">
            <ng-container *ngTemplateOutlet="bestRef;"></ng-container>
          </div>
          <div *ngSwitchCase="3">
            <ng-container *ngTemplateOutlet="prosConsRef;"></ng-container>
          </div>
          <div *ngSwitchCase="4">
            <ng-container *ngTemplateOutlet="topicsRef"></ng-container>
          </div>
          <div *ngSwitchDefault>
            <ng-container *ngTemplateOutlet="notesRef"></ng-container>
          </div>
        </ng-container>
      </div>
    </div>
  </div>
</section>



<ng-template #notesRef>
  <p>Dynamic Component Loading Approaches in Angular 19</p>
  <ul class="list-disc pl-4 text-sm">
    <li>
      <strong>Defer Blocks</strong>:
      Angular 19's new defer blocks provide a declarative, template-based approach to lazy loading components with built-in loading states and triggers.
    </li>
    <li>
      <strong>ViewContainerRef</strong>:
      Enhanced in Angular 19 with better TypeScript typings and improved performance for programmatic component creation and manipulation.
    </li>
    <li>
      <strong>ngComponentOutlet</strong>:
      Updated directive for template-based component instantiation with better support for standalone components and signal inputs.
    </li>
    <li>
      <strong>Dynamic Imports</strong>:
      Improved support for dynamically importing component classes with optimized bundling strategies.
    </li>
  </ul>

  <br>
  <br>

  <p>New Features and Enhancements in Angular 19</p>
  <ol class="list-decimal pl-4 text-sm">
    <li>
      <strong>Signal-Based Inputs for Dynamic Components</strong>:
      <ul class="list-disc pl-4">
        <li>Angular 19 enables dynamic components to leverage signal-based inputs, improving communication between parent and dynamically loaded children with better change detection performance.</li>
      </ul>
    </li>
    <li>
      <strong>Declarative Defer Loading</strong>:
      <ul class="list-disc pl-4">
        <li>The new <code>&#64;defer</code> block provides a template-based, declarative approach to dynamically loading components with built-in support for loading, error, and placeholder states.</li>
      </ul>
    </li>
    <li>
      <strong>Standalone Component Support</strong>:
      <ul class="list-disc pl-4">
        <li>Dynamic component loading fully supports standalone components without the need for NgModule, simplifying the dynamic loading process and improving bundle optimization.</li>
      </ul>
    </li>
    <li>
      <strong>Improved Context Passing</strong>:
      <ul class="list-disc pl-4">
        <li>Angular 19 offers enhanced APIs for passing and managing context data to dynamically loaded components, including better type safety and integration with dependency injection.</li>
      </ul>
    </li>
    <li>
      <strong>Embedded View Management</strong>:
      <ul class="list-disc pl-4">
        <li>Refined APIs for managing embedded views and their lifecycle, with improved performance and memory management for components that frequently create and destroy dynamic content.</li>
      </ul>
    </li>
  </ol>

  <br>
  <br>

  <p>Key Dynamic Component Loading Techniques</p>
  <ol class="list-decimal px-10 text-sm">
    <li>
      <strong>Using ViewContainerRef with createComponent</strong>:
      Programmatically create components with enhanced API in Angular 19.

      <button (click)="code1.hidden = !code1.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

      <span #code1 hidden copyToClipboard>
        <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
          <span>typescript</span>
          <span class="copy-button-wrapper bg-gray-700"></span>
        </div>

        <pre>
          <code
            [highlight]="code_1"
            [languages]="['typescript']">
          </code>
        </pre>
      </span>
    </li>
    <li>
      <strong>Using ngComponentOutlet</strong>:
      Declarative component instantiation in templates.

      <button (click)="code4.hidden = !code4.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

      <span #code4 hidden copyToClipboard>
        <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
          <span>typescript</span>
          <span class="copy-button-wrapper bg-gray-700"></span>
        </div>

        <pre>
          <code
            [highlight]="code_4"
            [languages]="['typescript']">
          </code>
        </pre>
      </span>
    </li>
    <li>
      <strong>Using Defer Blocks (New in Angular 19)</strong>:
      Declarative lazy loading with comprehensive loading states.

      <button (click)="code8.hidden = !code8.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

      <span #code8 hidden copyToClipboard>
        <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
          <span>typescript</span>
          <span class="copy-button-wrapper bg-gray-700"></span>
        </div>

        <pre>
          <code
            [highlight]="code_8"
            [languages]="['typescript']">
          </code>
        </pre>
      </span>
    </li>
    <li>
      <strong>Dynamic Component Loading with Signals</strong>:
      Passing signal-based data to dynamic components.

      <button (click)="code9.hidden = !code9.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

      <span #code9 hidden copyToClipboard>
        <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
          <span>typescript</span>
          <span class="copy-button-wrapper bg-gray-700"></span>
        </div>

        <pre>
          <code
            [highlight]="code_9"
            [languages]="['typescript']">
          </code>
        </pre>
      </span>
    </li>
    <li>
      <strong>Dynamic Importing Standalone Components</strong>:
      Loading standalone components on-demand.

      <button (click)="code10.hidden = !code10.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

      <span #code10 hidden copyToClipboard>
        <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
          <span>typescript</span>
          <span class="copy-button-wrapper bg-gray-700"></span>
        </div>

        <pre>
          <code
            [highlight]="code_10"
            [languages]="['typescript']">
          </code>
        </pre>
      </span>
    </li>
  </ol>

  <br>
  <br>

  <p>Dynamic Component Loading Comparison in Angular 19</p>
  <table class="w-full border-collapse rounded-lg overflow-hidden shadow-md">
    <thead>
      <tr class="bg-gray-800 text-gray-100">
        <th class="py-3 px-4 text-left">Approach</th>
        <th class="py-3 px-4 text-left">Use Case</th>
        <th class="py-3 px-4 text-left">Complexity</th>
      </tr>
    </thead>
    <tbody>
      <tr class="border-b border-gray-700 bg-gray-900 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">Defer Blocks</td>
        <td class="py-3 px-4">Template-based lazy loading with loading states</td>
        <td class="py-3 px-4">Low</td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-950 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">ViewContainerRef</td>
        <td class="py-3 px-4">Programmatic control over component lifecycle</td>
        <td class="py-3 px-4">Medium</td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-900 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">ngComponentOutlet</td>
        <td class="py-3 px-4">Simple template-based component switching</td>
        <td class="py-3 px-4">Low</td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-950 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">Dynamic Imports</td>
        <td class="py-3 px-4">Advanced lazy loading with custom bundling</td>
        <td class="py-3 px-4">High</td>
      </tr>
    </tbody>
  </table>
</ng-template>


<ng-template #bestRef>
  <ol class="list-decimal px-4 text-sm">
    <li>
      <strong class="text-sky-400">Prefer Defer Blocks for Common Use Cases</strong>
      <ul class="list-disc pl-4">
        <li>
          <strong>Declarative Approach</strong>:
          Use Angular 19's defer blocks for most lazy loading scenarios as they provide a declarative, template-based approach with built-in loading, error, and placeholder states.
        </li>
        <li>
          <strong>Loading Triggers</strong>:
          Leverage the various loading triggers (on viewport, on interaction, on timer) to optimize when components are loaded based on user needs.
        </li>
      </ul>
    </li>
    <li>
      <strong class="text-sky-400">Optimize Dynamic Component Communication</strong>:
      <ul class="list-disc pl-4">
        <li>
          <strong>Use Signal-Based Inputs</strong>:
          When passing data to dynamically loaded components, prefer signal-based inputs which integrate better with Angular 19's change detection system.
        </li>
        <li>
          <strong>Context Injection</strong>:
          For complex data requirements, use dependency injection and context tokens to provide data to dynamic components rather than complex property binding chains.
        </li>
      </ul>
    </li>
    <li>
      <strong class="text-sky-400">Leverage Standalone Components</strong>:
      <ul class="list-disc pl-4">
        <li>
          <strong>Eliminate NgModule Overhead</strong>:
          Use standalone components for dynamic loading to simplify the code and improve tree-shaking in your application.
        </li>
        <li>
          <strong>Self-Contained Dependencies</strong>:
          Ensure dynamic components declare all their dependencies to avoid unexpected runtime errors when loaded in isolation.
        </li>
      </ul>
    </li>
    <li>
      <strong class="text-sky-400">Manage Component Lifecycle</strong>:
      <ul class="list-disc pl-4">
        <li>
          <strong>Cleanup Resources</strong>:
          Always clean up dynamically created components by destroying references and unsubscribing from observables to prevent memory leaks.
        </li>
        <li>
          <strong>OnPush Change Detection</strong>:
          Use OnPush change detection for dynamically loaded components to improve performance, especially with signal-based inputs in Angular 19.
        </li>
      </ul>
    </li>
    <li>
      <strong class="text-sky-400">Optimize Bundle Size</strong>:
      <ul class="list-disc pl-4">
        <li>
          <strong>Dynamic Import Chunking</strong>:
          Configure appropriate bundling strategies in your Angular application to ensure dynamically loaded components are efficiently chunked.
        </li>
        <li>
          <strong>Preloading Strategies</strong>:
          Consider implementing custom preloading strategies for frequently used dynamic components to balance performance and initial load time.
        </li>
      </ul>
    </li>
  </ol>
</ng-template>


<ng-template #prosConsRef>
  <strong class="text-sky-400">
    Pros of Dynamic Component Loading in Angular 19:
  </strong>

  <ol class="list-decimal px-4 text-sm">
    <li>
      <strong>Improved Initial Load Time</strong>
      <ul class="list-disc pl-4">
        <li>
          By loading components only when needed, applications can achieve faster initial load times and better overall performance, especially with Angular 19's optimized lazy loading.
        </li>
      </ul>
    </li>
    <li>
      <strong>Enhanced Modularity</strong>
      <ul class="list-disc pl-4">
        <li>
          Dynamic component loading enables more modular application design by allowing components to be loaded, instantiated, and removed as needed at runtime.
        </li>
      </ul>
    </li>
    <li>
      <strong>Declarative Loading with Defer</strong>
      <ul class="list-disc pl-4">
        <li>
          Angular 19's defer blocks provide a declarative approach to dynamic loading with built-in loading states, simplifying previously complex patterns.
        </li>
      </ul>
    </li>
    <li>
      <strong>Better Signal Integration</strong>
      <ul class="list-disc pl-4">
        <li>
          Dynamic components in Angular 19 work seamlessly with signal-based inputs and reactivity, improving performance and developer experience.
        </li>
      </ul>
    </li>
    <li>
      <strong>Optimized Standalone Support</strong>
      <ul class="list-disc pl-4">
        <li>
          Standalone components simplify dynamic loading by removing NgModule dependencies, resulting in cleaner code and better tree-shaking.
        </li>
      </ul>
    </li>
  </ol>

  <br>

  <strong class="text-sky-400">
    Cons and Challenges:
  </strong>

  <ol class="list-decimal px-4 text-sm">
    <li>
      <strong>Increased Complexity</strong>
      <ul class="list-disc pl-4">
        <li>
          Dynamic component loading adds complexity to application architecture, especially when managing component communication and lifecycle events.
        </li>
      </ul>
    </li>
    <li>
      <strong>Potential Performance Overhead</strong>
      <ul class="list-disc pl-4">
        <li>
          While lazy loading improves initial load time, it can introduce slight delays when components are loaded on-demand, requiring careful consideration of loading strategies.
        </li>
      </ul>
    </li>
    <li>
      <strong>Type Safety Challenges</strong>
      <ul class="list-disc pl-4">
        <li>
          Maintaining type safety when passing data to dynamically loaded components can be challenging, though Angular 19's improved typing helps mitigate this.
        </li>
      </ul>
    </li>
    <li>
      <strong>Testing Complexity</strong>
      <ul class="list-disc pl-4">
        <li>
          Dynamically loaded components require more comprehensive testing strategies to ensure proper loading, initialization, and interaction.
        </li>
      </ul>
    </li>
    <li>
      <strong>Bundle Configuration Complexity</strong>
      <ul class="list-disc pl-4">
        <li>
          Optimizing bundle chunking for dynamically loaded components requires careful configuration of build tools and understanding of code splitting strategies.
        </li>
      </ul>
    </li>
  </ol>
</ng-template>


<ng-template #topicsRef>
  <p>Related Angular 19 Topics:</p>
  <ol class="list-decimal px-4 text-sm">
    <li>
      <strong>Defer Blocks</strong>:
      <p>
        Angular 19's new template feature for declaratively lazy-loading components with built-in loading, error, and placeholder states.
      </p>
    </li>
    <li>
      <strong>Standalone Components</strong>:
      <p>
        Self-contained components that don't require NgModule declarations, simplifying dynamic loading and improving tree-shaking.
      </p>
    </li>
    <li>
      <strong>Signal-Based Inputs</strong>:
      <p>
        Using the new input() function with dynamically loaded components for reactive, fine-grained updates with better performance.
      </p>
    </li>
    <li>
      <strong>Angular Hydration</strong>:
      <p>
        Optimizing server-side rendering (SSR) and client-side hydration for applications using dynamic component loading techniques.
      </p>
    </li>
    <li>
      <strong>Lazy Loading Modules</strong>:
      <p>
        Angular's router-based approach to lazy loading feature modules, which complements component-level dynamic loading.
      </p>
    </li>
    <li>
      <strong>Content Projection</strong>:
      <p>
        Using ng-content and ng-template with dynamically loaded components to implement flexible content composition patterns.
      </p>
    </li>
    <li>
      <strong>ViewContainerRef</strong>:
      <p>
        Angular's core API for programmatically creating and managing views, including dynamically loaded components.
      </p>
    </li>
  </ol>
</ng-template>
