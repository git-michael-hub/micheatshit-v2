<section class="p-4 text-sm">
  <p class="heading-1 mb-2">
    Library
  </p>

  <div class="text-content">
    <p>
      <span class="text-zinc-50 tw-font-medium">Libraries</span>
      in Angular 19 are reusable code collections that package components, services, and features for sharing across applications. With improved compatibility with modern JavaScript features, efficient tree-shaking through secondary entry points, and seamless integration with signal-based architecture, Angular 19 libraries enhance code reuse while maintaining optimized bundle sizes.
    </p>

    <br>

    <div class="flex flex-col">
      <div class="flex border-b border-gray-200">
        <button (click)="selectedTab = 1" [class.text-rose-300]="selectedTab===1" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Notes
        </button>
        <button (click)="selectedTab = 2" [class.text-rose-300]="selectedTab===2" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Best Practices
        </button>
        <button (click)="selectedTab = 3" [class.text-rose-300]="selectedTab===3" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Pros and Cons
        </button>
        <button (click)="selectedTab = 4" [class.text-rose-300]="selectedTab===4" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Related Topics
        </button>
      </div>
      <div class="p-4">
        <ng-container [ngSwitch]="selectedTab">
          <div *ngSwitchCase="2">
            <ng-container *ngTemplateOutlet="bestRef;"></ng-container>
          </div>
          <div *ngSwitchCase="3">
            <ng-container *ngTemplateOutlet="prosConsRef;"></ng-container>
          </div>
          <div *ngSwitchCase="4">
            <ng-container *ngTemplateOutlet="topicsRef"></ng-container>
          </div>
          <div *ngSwitchDefault>
            <ng-container *ngTemplateOutlet="notesRef"></ng-container>
          </div>
        </ng-container>
      </div>
    </div>
  </div>
</section>

<ng-template #notesRef>
  <p>Creating Angular 19 Libraries</p>
  <ul class="list-disc pl-4 text-sm">
    <li>
      <strong>Angular CLI</strong>:
      Generate a new library project using the CLI within a workspace.
    </li>
    <li>
      <strong>Structure</strong>:
      Libraries contain components, services, and other features with a proper public API.
    </li>
    <li>
      <strong>Build Process</strong>:
      Use ng-packagr to bundle and compile libraries for distribution.
    </li>
    <li>
      <strong>Angular 19 Features</strong>:
      Libraries can leverage signals, standalone components, and other modern features.
    </li>
  </ul>

  <br>
  <br>

  <p>Creating a Library with Angular CLI</p>

  <button (click)="code_1_ref.hidden = !code_1_ref.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

  <span #code_1_ref hidden copyToClipboard>
    <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
      <span>typescript</span>
      <span class="copy-button-wrapper bg-gray-700"></span>
    </div>

    <pre>
      <code
        [highlight]="code_1"
        [languages]="['typescript']">
      </code>
    </pre>
  </span>

  <br>
  <br>

  <p>Public API Exports</p>

  <button (click)="code_2_ref.hidden = !code_2_ref.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

  <span #code_2_ref hidden copyToClipboard>
    <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
      <span>typescript</span>
      <span class="copy-button-wrapper bg-gray-700"></span>
    </div>

    <pre>
      <code
        [highlight]="code_2"
        [languages]="['typescript']">
      </code>
    </pre>
  </span>

  <br>
  <br>

  <p>Modern Angular 19 Features in Libraries</p>

  <button (click)="code_3_ref.hidden = !code_3_ref.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

  <span #code_3_ref hidden copyToClipboard>
    <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
      <span>typescript</span>
      <span class="copy-button-wrapper bg-gray-700"></span>
    </div>

    <pre>
      <code
        [highlight]="code_3"
        [languages]="['typescript']">
      </code>
    </pre>
  </span>

  <br>
  <br>

  <p>Secondary Entry Points</p>

  <button (click)="code_4_ref.hidden = !code_4_ref.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

  <span #code_4_ref hidden copyToClipboard>
    <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
      <span>typescript</span>
      <span class="copy-button-wrapper bg-gray-700"></span>
    </div>

    <pre>
      <code
        [highlight]="code_4"
        [languages]="['typescript']">
      </code>
    </pre>
  </span>

  <br>
  <br>

  <p>Signal-based Components in Libraries</p>

  <button (click)="code_5_ref.hidden = !code_5_ref.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

  <span #code_5_ref hidden copyToClipboard>
    <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
      <span>typescript</span>
      <span class="copy-button-wrapper bg-gray-700"></span>
    </div>

    <pre>
      <code
        [highlight]="code_5"
        [languages]="['typescript']">
      </code>
    </pre>
  </span>

  <br>
  <br>

  <p>Publishing Angular 19 Libraries</p>

  <button (click)="code_6_ref.hidden = !code_6_ref.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

  <span #code_6_ref hidden copyToClipboard>
    <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
      <span>typescript</span>
      <span class="copy-button-wrapper bg-gray-700"></span>
    </div>

    <pre>
      <code
        [highlight]="code_6"
        [languages]="['typescript']">
      </code>
    </pre>
  </span>
</ng-template>

<ng-template #bestRef>
  <p>Best Practices for Angular 19 Libraries</p>

  <ul class="list-disc pl-4 text-sm">
    <li>
      <strong>Use Secondary Entry Points</strong>: Organize library into logical feature groups with their own entry points to enable tree-shaking.
    </li>
    <li>
      <strong>Version Compatibility</strong>: Clearly document which Angular versions your library supports in package.json's peerDependencies.
    </li>
    <li>
      <strong>Standalone Components</strong>: Prefer standalone components in Angular 19 libraries for improved tree-shaking and easier consumption.
    </li>
    <li>
      <strong>Public API Discipline</strong>: Only export what users need through public-api.ts, keeping implementation details private.
    </li>
    <li>
      <strong>Strong Typing</strong>: Use explicit TypeScript interfaces and types for all public APIs and exported functions.
    </li>
    <li>
      <strong>Documentation</strong>: Include thorough documentation, examples, and a demo application to showcase library usage.
    </li>
    <li>
      <strong>Testing</strong>: Maintain high test coverage for your library's components and services to ensure reliability.
    </li>
    <li>
      <strong>Schematics</strong>: Consider providing schematics to help with setup and common operations for your library.
    </li>
    <li>
      <strong>Minimize Dependencies</strong>: Avoid adding unnecessary dependencies that could conflict with the consuming application.
    </li>
    <li>
      <strong>Signal-based Architecture</strong>: When appropriate, use Angular 19's signals for reactive state management in your library.
    </li>
  </ul>
</ng-template>

<ng-template #prosConsRef>
  <div class="grid grid-cols-2 gap-4">
    <div>
      <p class="font-bold mb-2">Pros</p>
      <ul class="list-disc pl-4 text-sm">
        <li>
          <strong>Code Reuse</strong>: Share functionality across multiple Angular applications.
        </li>
        <li>
          <strong>Encapsulation</strong>: Hide implementation details behind a well-defined API.
        </li>
        <li>
          <strong>Versioning</strong>: Independent versioning from the host application, allowing incremental updates.
        </li>
        <li>
          <strong>Testing</strong>: Test libraries in isolation with focused test coverage.
        </li>
        <li>
          <strong>Team Collaboration</strong>: Different teams can work on libraries and applications independently.
        </li>
        <li>
          <strong>Angular Integration</strong>: Seamless integration with Angular's dependency injection and component systems.
        </li>
        <li>
          <strong>Tree-shaking</strong>: Angular 19 optimizes library usage through improved tree-shaking.
        </li>
        <li>
          <strong>Modern Features</strong>: Full access to Angular 19's latest features like signals and standalone components.
        </li>
      </ul>
    </div>
    <div>
      <p class="font-bold mb-2">Cons</p>
      <ul class="list-disc pl-4 text-sm">
        <li>
          <strong>Complexity</strong>: Additional build configuration and dependency management.
        </li>
        <li>
          <strong>Versioning Challenges</strong>: Maintaining compatibility across multiple Angular versions can be difficult.
        </li>
        <li>
          <strong>Build Process</strong>: Libraries require a separate compilation step through ng-packagr.
        </li>
        <li>
          <strong>Development Workflow</strong>: Changes to libraries require rebuilding and reinstalling in consuming applications.
        </li>
        <li>
          <strong>API Design</strong>: More upfront planning required for stable public APIs.
        </li>
        <li>
          <strong>Documentation Overhead</strong>: Libraries need thorough documentation for effective adoption.
        </li>
        <li>
          <strong>Bundle Size Impact</strong>: Poorly designed libraries can increase application bundle size unnecessarily.
        </li>
        <li>
          <strong>Debugging Complexity</strong>: Debugging across library and application boundaries can be challenging.
        </li>
      </ul>
    </div>
  </div>
</ng-template>

<ng-template #topicsRef>
  <div class="grid grid-cols-2 gap-4">
    <div>
      <p class="font-bold mb-2">Related Angular Concepts</p>
      <ul class="list-disc pl-4 text-sm">
        <li>
          <a routerLink="/angular/concepts/component" class="text-sky-400 hover:text-rose-400">Components</a>
        </li>
        <li>
          <a routerLink="/angular/concepts/dependency-injection" class="text-sky-400 hover:text-rose-400">Dependency Injection</a>
        </li>
        <li>
          <a routerLink="/angular/concepts/module" class="text-sky-400 hover:text-rose-400">NgModules</a>
        </li>
        <li>
          <a routerLink="/angular/concepts/aot" class="text-sky-400 hover:text-rose-400">AOT Compilation</a>
        </li>
        <li>
          <a routerLink="/angular/concepts/jit" class="text-sky-400 hover:text-rose-400">JIT Compilation</a>
        </li>
        <li>
          <a routerLink="/angular/concepts/standalone" class="text-sky-400 hover:text-rose-400">Standalone Components</a>
        </li>
        <li>
          <a routerLink="/angular/concepts/signals" class="text-sky-400 hover:text-rose-400">Signals</a>
        </li>
      </ul>
    </div>
    <div>
      <p class="font-bold mb-2">Tools & Resources</p>
      <ul class="list-disc pl-4 text-sm">
        <li>
          <strong>ng-packagr</strong>: The bundling tool for Angular libraries
        </li>
        <li>
          <strong>Angular CLI</strong>: Commands for generating and building libraries
        </li>
        <li>
          <strong>npm/yarn</strong>: Package managers for publishing libraries
        </li>
        <li>
          <strong>Semantic Versioning</strong>: Version numbering standard for libraries
        </li>
        <li>
          <strong>Compodoc</strong>: Documentation generator for Angular libraries
        </li>
        <li>
          <strong>Secondary Entry Points</strong>: Optimizing library imports
        </li>
        <li>
          <strong>Schematics</strong>: Code generators for libraries
        </li>
      </ul>
    </div>
  </div>
</ng-template>
