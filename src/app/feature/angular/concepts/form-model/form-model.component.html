<section class="p-4 text-sm">
  <p class="heading-1 mb-2">
    Form Model
  </p>

  <div class="text-content">
    <p>
      <span class="text-zinc-50 tw-font-medium">Form Model</span>
      in Angular 19 provides a structured approach to managing form state, validation, and data flow. It uses objects like FormGroup, FormControl, and FormArray to create a representation of the form that can be manipulated programmatically and bound to the UI. Angular 19 enhances form models with signals integration, improved type safety, and optimized performance for modern applications.
    </p>

    <br>

    <div class="flex flex-col">
      <div class="flex border-b border-gray-200">
        <button (click)="selectedTab = 1" [class.text-rose-300]="selectedTab===1" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Notes
        </button>
        <button (click)="selectedTab = 2" [class.text-rose-300]="selectedTab===2" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Best Practices
        </button>
        <button (click)="selectedTab = 3" [class.text-rose-300]="selectedTab===3" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Pros and Cons
        </button>
        <button (click)="selectedTab = 4" [class.text-rose-300]="selectedTab===4" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Related Topics
        </button>
      </div>
      <div class="p-4">
        <ng-container [ngSwitch]="selectedTab">
          <div *ngSwitchCase="2">
            <ng-container *ngTemplateOutlet="bestRef;"></ng-container>
          </div>
          <div *ngSwitchCase="3">
            <ng-container *ngTemplateOutlet="prosConsRef;"></ng-container>
          </div>
          <div *ngSwitchCase="4">
            <ng-container *ngTemplateOutlet="topicsRef"></ng-container>
          </div>
          <div *ngSwitchDefault>
            <ng-container *ngTemplateOutlet="notesRef"></ng-container>
          </div>
        </ng-container>
      </div>
    </div>
  </div>
</section>


<ng-template #notesRef>
  <p>What is a Form Model?</p>
  <ul class="list-disc pl-4 text-sm">
    <li>
      <strong>Definition</strong>:
      A Form Model is a structured representation of a form in Angular, created using FormGroup, FormControl, and FormArray classes.
    </li>
    <li>
      <strong>Reactive Approach</strong>:
      Form Models are the foundation of Angular's reactive forms approach, allowing you to define form structure and validation in your TypeScript code.
    </li>
    <li>
      <strong>Data Binding</strong>:
      Form Models maintain synchronization between your component class and the UI, handling data flow in both directions.
    </li>
    <li>
      <strong>Validation Framework</strong>:
      Form Models integrate with Angular's validation system to track the validity of individual controls and the entire form.
    </li>
  </ul>

  <br>
  <br>

  <p>Form Model Improvements in Angular 19</p>
  <ol class="list-decimal pl-4 text-sm">
    <li>
      <strong>Signal Integration</strong>:
      <ul class="list-disc pl-4">
        <li>Angular 19 enables seamless integration between form models and signals, providing more efficient reactivity and better control over change detection.</li>
      </ul>
    </li>
    <li>
      <strong>Type-Safe Form Controls</strong>:
      <ul class="list-disc pl-4">
        <li>Enhanced TypeScript support with the nonNullable option and improved generic types for form controls, ensuring type safety across your application.</li>
      </ul>
    </li>
    <li>
      <strong>Zone-less Operation</strong>:
      <ul class="list-disc pl-4">
        <li>Form models can operate efficiently outside of Zone.js, using signals and the takeUntilDestroyed operator for automatic cleanup.</li>
      </ul>
    </li>
    <li>
      <strong>Standalone Component Integration</strong>:
      <ul class="list-disc pl-4">
        <li>Better support for using reactive forms in standalone components with simplified imports and reduced boilerplate.</li>
      </ul>
    </li>
    <li>
      <strong>Advanced Form Builders</strong>:
      <ul class="list-disc pl-4">
        <li>Improved FormBuilder with better type inference, making it easier to create complex form structures with proper typing.</li>
      </ul>
    </li>
  </ol>

  <br>
  <br>

  <p>Working with Form Models in Angular 19</p>
  <ol class="list-decimal px-10 text-sm">
    <li>
      <strong>Basic Form Model with Signals</strong>:
      Create a simple form with validation and signal integration.

      <button (click)="code_1_ref.hidden = !code_1_ref.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

      <span #code_1_ref hidden copyToClipboard>
        <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
          <span>typescript</span>
          <span class="copy-button-wrapper bg-gray-700"></span>
        </div>

        <pre>
          <code
            [highlight]="code_1"
            [languages]="['typescript']">
          </code>
        </pre>
      </span>
    </li>
    <li>
      <strong>Signal-Based Form Model</strong>:
      Connecting form controls to signals for reactive state management.

      <button (click)="code_2_ref.hidden = !code_2_ref.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

      <span #code_2_ref hidden copyToClipboard>
        <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
          <span>typescript</span>
          <span class="copy-button-wrapper bg-gray-700"></span>
        </div>

        <pre>
          <code
            [highlight]="code_2"
            [languages]="['typescript']">
          </code>
        </pre>
      </span>
    </li>
    <li>
      <strong>Nested Form Model with FormArray</strong>:
      Creating complex form structures with nested groups and arrays.

      <button (click)="code_3_ref.hidden = !code_3_ref.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

      <span #code_3_ref hidden copyToClipboard>
        <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
          <span>typescript</span>
          <span class="copy-button-wrapper bg-gray-700"></span>
        </div>

        <pre>
          <code
            [highlight]="code_3"
            [languages]="['typescript']">
          </code>
        </pre>
      </span>
    </li>
    <li>
      <strong>Dynamic Form Model Generation</strong>:
      Generating form models at runtime based on configuration data.

      <button (click)="code_4_ref.hidden = !code_4_ref.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

      <span #code_4_ref hidden copyToClipboard>
        <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
          <span>typescript</span>
          <span class="copy-button-wrapper bg-gray-700"></span>
        </div>

        <pre>
          <code
            [highlight]="code_4"
            [languages]="['typescript']">
          </code>
        </pre>
      </span>
    </li>
  </ol>

  <br>
  <br>

  <p>Form Model Classes Comparison</p>
  <table class="w-full border-collapse rounded-lg overflow-hidden shadow-md">
    <thead>
      <tr class="bg-gray-800 text-gray-100">
        <th class="py-3 px-4 text-left">Class</th>
        <th class="py-3 px-4 text-left">Purpose</th>
        <th class="py-3 px-4 text-left">Angular 19 Improvements</th>
      </tr>
    </thead>
    <tbody>
      <tr class="border-b border-gray-700 bg-gray-900 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">FormControl</td>
        <td class="py-3 px-4">Manages a single form input</td>
        <td class="py-3 px-4">Signal integration, nonNullable option</td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-950 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">FormGroup</td>
        <td class="py-3 px-4">Manages a collection of controls</td>
        <td class="py-3 px-4">Improved typing, better performance</td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-900 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">FormArray</td>
        <td class="py-3 px-4">Manages dynamic lists of controls</td>
        <td class="py-3 px-4">Better type inference for arrays</td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-950 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">FormBuilder</td>
        <td class="py-3 px-4">Factory service for form creation</td>
        <td class="py-3 px-4">Enhanced type safety and inference</td>
      </tr>
    </tbody>
  </table>
</ng-template>


<ng-template #bestRef>
  <ol class="list-decimal px-4 text-sm">
    <li>
      <strong class="text-sky-400">Leverage Signal Integration</strong>
      <ul class="list-disc pl-4">
        <li>
          <strong>Connect Forms to Signals</strong>:
          Use the takeUntilDestroyed operator from &#64;angular/core/rxjs-interop to connect form control values to signals for better reactivity.

          <button (click)="code_5_ref.hidden = !code_5_ref.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

          <span #code_5_ref hidden copyToClipboard>
            <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
              <span>typescript</span>
              <span class="copy-button-wrapper bg-gray-700"></span>
            </div>

            <pre>
              <code
                [highlight]="code_5"
                [languages]="['typescript']">
              </code>
            </pre>
          </span>
        </li>
        <li>
          <strong>Use Computed Signals for Derived State</strong>:
          Derive computed values from form state using Angular's computed() function to avoid duplicating logic and ensure consistency.
          <pre><code class="text-xs">// Computed values from form state
const isNameValid = computed(() =>
  !formControls.name.errors && formControls.name.touched
);</code></pre>
        </li>
      </ul>
    </li>
    <li>
      <strong class="text-sky-400">Structure Forms Effectively</strong>:
      <ul class="list-disc pl-4">
        <li>
          <strong>Nested Form Groups</strong>:
          Break down complex forms into logical nested form groups to improve maintainability and code organization.
          <pre><code class="text-xs">// Logical grouping with nested forms
this.userForm = this.fb.group({{ '{' }}
  basicInfo: this.fb.group({{ '{' }}
    name: ['', Validators.required],
    email: ['', [Validators.required, Validators.email]]
  {{ '}' }}),
  address: this.fb.group({{ '{' }}
    street: [''],
    city: [''],
    zipCode: ['']
  {{ '}' }})
{{ '}' }});</code></pre>
        </li>
        <li>
          <strong>Form Arrays for Dynamic Data</strong>:
          Use FormArray for parts of forms that need to grow or shrink dynamically, such as adding multiple items to an order.
        </li>
      </ul>
    </li>
    <li>
      <strong class="text-sky-400">Implement Zone-less Forms</strong>:
      <ul class="list-disc pl-4">
        <li>
          <strong>Signal-Based UI Updates</strong>:
          Use signals to drive UI updates from form changes in zone-less applications for better performance.
        </li>
        <li>
          <strong>Optimize Change Detection</strong>:
          Control when change detection runs by using signals instead of relying on Zone.js, especially for complex forms with frequent updates.

          <button (click)="code_6_ref.hidden = !code_6_ref.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

          <span #code_6_ref hidden copyToClipboard>
            <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
              <span>typescript</span>
              <span class="copy-button-wrapper bg-gray-700"></span>
            </div>

            <pre>
              <code
                [highlight]="code_6"
                [languages]="['typescript']">
              </code>
            </pre>
          </span>
        </li>
      </ul>
    </li>
    <li>
      <strong class="text-sky-400">Enhance Validation Strategies</strong>:
      <ul class="list-disc pl-4">
        <li>
          <strong>Custom Validators</strong>:
          Create reusable validator functions that can be shared across different forms in your application.
          <pre><code class="text-xs">// Custom validator function
function passwordStrength(control: AbstractControl): ValidationErrors | null {{ '{' }}
  const value = control.value;
  if (!value) return null;

  const hasUpperCase = /[A-Z]/.test(value);
  const hasLowerCase = /[a-z]/.test(value);
  const hasDigit = /\d/.test(value);

  return (hasUpperCase && hasLowerCase && hasDigit)
    ? null
    : {{ '{' }} passwordStrength: true {{ '}' }};
{{ '}' }}</code></pre>
        </li>
        <li>
          <strong>Cross-Field Validation</strong>:
          Use form-level validators to validate relationships between multiple fields such as password confirmation.
        </li>
      </ul>
    </li>
    <li>
      <strong class="text-sky-400">Prioritize User Experience</strong>:
      <ul class="list-disc pl-4">
        <li>
          <strong>Staged Validation</strong>:
          Configure when validation messages appear using the updateOn property ('change', 'blur', or 'submit') to avoid overwhelming users.
        </li>
        <li>
          <strong>Progressive Disclosure</strong>:
          Show or hide parts of a form based on user input, using form values to conditionally render sections of the UI.
          <pre><code class="text-xs">// Form-driven conditional content
&lt;div *ngIf="userForm.get('newsletter')?.value"&gt;
  &lt;label&gt;Email frequency:&lt;/label&gt;
  &lt;select formControlName="emailFrequency"&gt;
    &lt;option value="daily"&gt;Daily&lt;/option&gt;
    &lt;option value="weekly"&gt;Weekly&lt;/option&gt;
    &lt;option value="monthly"&gt;Monthly&lt;/option&gt;
  &lt;/select&gt;
&lt;/div&gt;</code></pre>
        </li>
      </ul>
    </li>
  </ol>
</ng-template>


<ng-template #prosConsRef>
  <strong class="text-sky-400">
    Pros of Angular 19's Form Model:
  </strong>

  <ol class="list-decimal px-4 text-sm">
    <li>
      <strong>Signal Integration</strong>
      <ul class="list-disc pl-4">
        <li>
          Form models now integrate seamlessly with Angular's signals system, enabling more precise control over reactivity and change detection, especially valuable in zone-less applications.
        </li>
      </ul>
    </li>
    <li>
      <strong>Enhanced Type Safety</strong>
      <ul class="list-disc pl-4">
        <li>
          Improved TypeScript support with better generic types, nonNullable controls, and stronger type inference prevents many common errors at compile time rather than runtime.
        </li>
      </ul>
    </li>
    <li>
      <strong>Performance Improvements</strong>
      <ul class="list-disc pl-4">
        <li>
          Form models can now operate efficiently outside of Zone.js, resulting in better performance and reduced memory usage for form-heavy applications.
        </li>
      </ul>
    </li>
    <li>
      <strong>Simplified Cleanup</strong>
      <ul class="list-disc pl-4">
        <li>
          Integration with takeUntilDestroyed from &#64;angular/core/rxjs-interop eliminates the need for manual subscription management, preventing memory leaks without boilerplate code.
        </li>
      </ul>
    </li>
    <li>
      <strong>Better Standalone Component Support</strong>
      <ul class="list-disc pl-4">
        <li>
          Form models work naturally with standalone components, reducing the need for module-level imports and making forms easier to implement in modern Angular applications.
        </li>
      </ul>
    </li>
  </ol>

  <br>

  <strong class="text-sky-400">
    Cons and Challenges:
  </strong>

  <ol class="list-decimal px-4 text-sm">
    <li>
      <strong>Migration Complexity</strong>
      <ul class="list-disc pl-4">
        <li>
          Upgrading existing forms to take advantage of Angular 19 features like signal integration requires significant refactoring, which can be time-consuming for large applications.
        </li>
      </ul>
    </li>
    <li>
      <strong>Learning Curve</strong>
      <ul class="list-disc pl-4">
        <li>
          The signal-based approach to form management introduces new patterns and concepts that developers need to learn, particularly for those familiar with the traditional reactive forms pattern.
        </li>
      </ul>
    </li>
    <li>
      <strong>Increased Initial Setup</strong>
      <ul class="list-disc pl-4">
        <li>
          Setting up signal integration with forms requires more code initially compared to basic reactive forms, which may feel like overhead for simpler forms.
        </li>
      </ul>
    </li>
    <li>
      <strong>Library Compatibility Issues</strong>
      <ul class="list-disc pl-4">
        <li>
          Third-party form libraries may not yet be fully compatible with Angular 19's signal approach, requiring custom integration or workarounds in some cases.
        </li>
      </ul>
    </li>
    <li>
      <strong>Debugging Complexity</strong>
      <ul class="list-disc pl-4">
        <li>
          Tracking data flow in signal-integrated forms can be more complex than traditional forms, as it involves understanding both the forms API and signals system.
        </li>
      </ul>
    </li>
  </ol>
</ng-template>


<ng-template #topicsRef>
  <p>Related Angular 19 Topics:</p>
  <ol class="list-decimal px-4 text-sm">
    <li>
      <strong>FormControl</strong>:
      <p>
        The fundamental building block for form inputs in Angular, now enhanced with signal integration and improved type safety.
      </p>
    </li>
    <li>
      <strong>Signals</strong>:
      <p>
        Angular's reactive primitive that can be connected with form models to create more efficient forms with fine-grained reactivity.
      </p>
    </li>
    <li>
      <strong>Validators</strong>:
      <p>
        Functions that enforce data quality rules on form controls, with better TypeScript integration in Angular 19.
      </p>
    </li>
    <li>
      <strong>FormArray</strong>:
      <p>
        A specialized collection in form models for managing dynamic lists of controls, with improved typing in Angular 19.
      </p>
    </li>
    <li>
      <strong>Custom Form Controls</strong>:
      <p>
        Creating reusable form controls that implement ControlValueAccessor, now with better standalone component support.
      </p>
    </li>
    <li>
      <strong>Zone-less Applications</strong>:
      <p>
        Angular applications that operate without Zone.js, using signals for change detection, with form models specifically optimized for this approach in Angular 19.
      </p>
    </li>
    <li>
      <strong>takeUntilDestroyed</strong>:
      <p>
        A utility from &#64;angular/core/rxjs-interop that automatically manages form subscriptions, cleaning them up when components are destroyed.
      </p>
    </li>
  </ol>
</ng-template>
