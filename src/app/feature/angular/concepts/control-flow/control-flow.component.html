<section class="p-4 text-sm">
  <p class="heading-1 mb-2">
    Built-in Control Flow
  </p>

  <div class="text-content">
    <p>
      <span class="text-zinc-50 tw-font-medium">Built-in Control Flow</span>
      in Angular 19 provides a more efficient and type-safe way to implement conditional rendering, iterating over collections, and switching between different views. This feature is now fully stable in Angular 19, offering significant performance improvements and more intuitive template syntax compared to traditional structural directives.
    </p>

    <br>

    <div class="flex flex-col">
      <div class="flex border-b border-gray-200">
        <button  (click)="selectedTab = 1" [class.text-rose-300]="selectedTab===1" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Notes
        </button>
        <button  (click)="selectedTab = 2" [class.text-rose-300]="selectedTab===2" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Best Practices
        </button>
        <button  (click)="selectedTab = 3" [class.text-rose-300]="selectedTab===3" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Pros and Cons
        </button>
        <button  (click)="selectedTab = 4" [class.text-rose-300]="selectedTab===4" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Related Topics
        </button>
      </div>
      <div class="p-4">
        <ng-container [ngSwitch]="selectedTab">
          <div *ngSwitchCase="2">
            <ng-container *ngTemplateOutlet="bestRef;"></ng-container>
          </div>
          <div *ngSwitchCase="3">
            <ng-container *ngTemplateOutlet="prosConsRef;"></ng-container>
          </div>
          <div *ngSwitchCase="4">
            <ng-container *ngTemplateOutlet="topicsRef"></ng-container>
          </div>
          <div *ngSwitchDefault>
            <ng-container *ngTemplateOutlet="notesRef"></ng-container>
          </div>
        </ng-container>
      </div>
    </div>

  </div>
</section>



<ng-template #notesRef>
  <p>Key Features of Built-in Control Flow in Angular 19</p>
  <ul class="list-disc pl-4 text-sm">
    <li>
      <strong>&#64;if Blocks</strong>:
      Replaces ngIf with a more efficient and readable syntax for conditional rendering.
    </li>
    <li>
      <strong>&#64;for Blocks</strong>:
      Replaces ngFor with built-in tracking, better performance, and enhanced syntax for iterating over collections.
    </li>
    <li>
      <strong>&#64;switch Blocks</strong>:
      Provides a more intuitive way to render different templates based on a given expression.
    </li>
    <li>
      <strong>&#64;defer Blocks</strong>:
      Enables lazy loading of templates for improved initial loading performance.
    </li>
    <li>
      <strong>&#64;empty Blocks</strong>:
      Simplifies handling of empty collections in loops.
    </li>
  </ul>

  <br>
  <br>

  <p>Angular 19 Enhancements for Control Flow</p>
  <ol class="list-decimal pl-4 text-sm">
    <li>
      <strong>Fully Stable Release</strong>:
      <ul class="list-disc pl-4">
        <li>Built-in control flow, introduced as a developer preview in Angular 17, is now fully stable in Angular 19, making it the recommended approach for all production applications.</li>
      </ul>
    </li>
    <li>
      <strong>Performance Improvements</strong>:
      <ul class="list-disc pl-4">
        <li>Angular 19 further optimizes control flow blocks, resulting in faster rendering, smaller bundles, and improved change detection.</li>
      </ul>
    </li>
    <li>
      <strong>Enhanced Type Safety</strong>:
      <ul class="list-disc pl-4">
        <li>Better TypeScript integration with improved type checking for variables used inside control flow blocks.</li>
      </ul>
    </li>
    <li>
      <strong>Better AOT Compilation</strong>:
      <ul class="list-disc pl-4">
        <li>Control flow blocks are now fully optimized for AOT compilation, allowing for more aggressive tree-shaking and smaller bundles compared to structural directives.</li>
      </ul>
    </li>
    <li>
      <strong>Migration Tools</strong>:
      <ul class="list-disc pl-4">
        <li>Angular 19 includes improved migration tools that help automatically convert traditional structural directives to the new control flow syntax.</li>
      </ul>
    </li>
  </ol>

  <br>
  <br>

  <p>&#64;if Blocks (Conditional Rendering)</p>

  <button (click)="code1.hidden = !code1.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

  <span #code1 hidden copyToClipboard>
    <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
      <span>html</span>
      <span class="copy-button-wrapper bg-gray-700"></span>
    </div>

    <pre>
      <code
        [highlight]="code_1"
        [languages]="['html']">
      </code>
    </pre>
  </span>

  <br>
  <br>

  <p>&#64;for Blocks (Iterating over Collections)</p>

  <button (click)="code2.hidden = !code2.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

  <span #code2 hidden copyToClipboard>
    <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
      <span>html</span>
      <span class="copy-button-wrapper bg-gray-700"></span>
    </div>

    <pre>
      <code
        [highlight]="code_2"
        [languages]="['html']">
      </code>
    </pre>
  </span>

  <br>
  <br>

  <p>&#64;switch Blocks (Conditional Rendering with Multiple Options)</p>

  <button (click)="code3.hidden = !code3.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

  <span #code3 hidden copyToClipboard>
    <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
      <span>html</span>
      <span class="copy-button-wrapper bg-gray-700"></span>
    </div>

    <pre>
      <code
        [highlight]="code_3"
        [languages]="['html']">
      </code>
    </pre>
  </span>

  <br>
  <br>

  <p>&#64;defer Blocks (Lazy Loading of Templates)</p>

  <button (click)="code4.hidden = !code4.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

  <span #code4 hidden copyToClipboard>
    <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
      <span>html</span>
      <span class="copy-button-wrapper bg-gray-700"></span>
    </div>

    <pre>
      <code
        [highlight]="code_4"
        [languages]="['html']">
      </code>
    </pre>
  </span>

  <br>
  <br>

  <p>Common Patterns and Usage</p>
  <br>
  <table class="w-full border-collapse rounded-lg overflow-hidden shadow-md">
    <thead>
      <tr class="bg-gray-800 text-gray-100">
        <th class="py-3 px-4 text-left">Traditional Directive</th>
        <th class="py-3 px-4 text-left">Built-in Control Flow</th>
      </tr>
    </thead>
    <tbody>
      <tr class="border-b border-gray-700 bg-gray-900 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4"><code>*ngIf="condition"</code></td>
        <td class="py-3 px-4"><code>&#64;if (condition)</code></td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-950 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4"><code>*ngIf="condition; else elseBlock"</code></td>
        <td class="py-3 px-4"><code>&#64;if (condition) {{ '{' }} ... {{ '}' }} &#64;else {{ '{' }} ... {{ '}' }}</code></td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-900 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4"><code>*ngFor="let item of items"</code></td>
        <td class="py-3 px-4"><code>&#64;for (item of items; track item.id)</code></td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-950 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4"><code>*ngFor="let item of items; index as i"</code></td>
        <td class="py-3 px-4"><code>&#64;for (item of items; track $index)</code></td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-900 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4"><code>[ngSwitch]="value"</code></td>
        <td class="py-3 px-4"><code>&#64;switch (value)</code></td>
      </tr>
    </tbody>
  </table>
</ng-template>

<ng-template #bestRef>
  <ol class="list-decimal px-4 text-sm">
    <li>
      <strong class="text-sky-400">Use Track Function for Better Performance</strong>
      <ul class="list-disc pl-4">
        <li>
          <strong>Always Use Track</strong>:
          Always specify a track function with the &#64;for block to optimize rendering. Use unique identifiers like item IDs when available.
        </li>
        <li>
          <strong>Avoid Using $index as Track</strong>:
          While $index is available, prefer using a unique identifier for tracking when possible, as it provides better performance for collections that change frequently.
        </li>
      </ul>
    </li>
    <li>
      <strong class="text-sky-400">Leverage &#64;empty for Better User Experience</strong>
      <ul class="list-disc pl-4">
        <li>
          <strong>Handle Empty States</strong>:
          Always provide an &#64;empty block when using &#64;for to handle empty collections gracefully and improve user experience.
        </li>
        <li>
          <strong>Use Meaningful Empty States</strong>:
          Instead of just showing "No items", provide context-specific empty states that guide users on how to add items or what to expect.
        </li>
      </ul>
    </li>
    <li>
      <strong class="text-sky-400">Optimize Template Size</strong>
      <ul class="list-disc pl-4">
        <li>
          <strong>Keep Templates Small</strong>:
          Break down large templates into smaller components to improve maintainability and performance.
        </li>
        <li>
          <strong>Use Defer for Heavy Content</strong>:
          Use &#64;defer for content that is heavy or not immediately needed, especially in conjunction with &#64;if and &#64;for blocks.
        </li>
      </ul>
    </li>
    <li>
      <strong class="text-sky-400">Migration and Compatibility</strong>
      <ul class="list-disc pl-4">
        <li>
          <strong>Migrate Gradually</strong>:
          When migrating existing applications, start with newer components or simpler templates before tackling complex ones.
        </li>
        <li>
          <strong>Use Migration Tools</strong>:
          Leverage Angular's official migration tools to help with the conversion process from structural directives to control flow blocks.
        </li>
      </ul>
    </li>
    <li>
      <strong class="text-sky-400">Testing Considerations</strong>
      <ul class="list-disc pl-4">
        <li>
          <strong>Test Empty States</strong>:
          Ensure your tests cover empty collections and other edge cases when using control flow blocks.
        </li>
        <li>
          <strong>Test Lazy Loaded Content</strong>:
          When using &#64;defer, ensure your tests properly handle the loading and placeholder states.
        </li>
      </ul>
    </li>
  </ol>
</ng-template>

<ng-template #prosConsRef>
  <strong class="text-sky-400">
    Pros:
  </strong>

  <br>

  <ol class="list-decimal px-10 text-sm">
    <li>
      <strong>Improved Performance</strong>
      <ul class="list-disc pl-4">
        <li>
          <span class="text-zinc-50 tw-font-medium">Faster Rendering</span>:
          Built-in control flow provides more efficient rendering through optimized compilation and change detection.
        </li>
        <li>
          <span class="text-zinc-50 tw-font-medium">Smaller Bundle Size</span>:
          Control flow blocks result in smaller bundle sizes compared to directive-based approaches due to better tree-shaking.
        </li>
      </ul>
    </li>
    <li>
      <strong>Enhanced Developer Experience</strong>
      <ul class="list-disc pl-4">
        <li>
          <span class="text-zinc-50 tw-font-medium">Cleaner Syntax</span>:
          The new syntax is more intuitive and easier to read, especially for complex conditional logic.
        </li>
        <li>
          <span class="text-zinc-50 tw-font-medium">Better Type Checking</span>:
          Improved TypeScript integration provides better type checking and autocomplete support.
        </li>
      </ul>
    </li>
    <li>
      <strong>Better Optimizations</strong>
      <ul class="list-disc pl-4">
        <li>
          <span class="text-zinc-50 tw-font-medium">Automatic Tracking</span>:
          The &#64;for block requires explicit tracking, which leads to more predictable and efficient rendering.
        </li>
        <li>
          <span class="text-zinc-50 tw-font-medium">Lazy Loading</span>:
          Integration with the &#64;defer block allows for more granular control over when content is loaded.
        </li>
      </ul>
    </li>
    <li>
      <strong>Future-Proof Development</strong>
      <ul class="list-disc pl-4">
        <li>
          <span class="text-zinc-50 tw-font-medium">Angular's Recommended Approach</span>:
          As of Angular 19, built-in control flow is fully stable and is now the officially recommended approach for all new development.
        </li>
        <li>
          <span class="text-zinc-50 tw-font-medium">Better AOT Compatibility</span>:
          Built for better integration with Angular's AOT compiler, leading to more efficient builds.
        </li>
      </ul>
    </li>
  </ol>

  <br>

  <strong class="text-sky-400">
    Cons:
  </strong>

  <br>

  <ol class="list-decimal px-10 text-sm">
    <li>
      <strong>Migration Effort</strong>
      <ul class="list-disc pl-4">
        <li>
          <span class="text-zinc-50 tw-font-medium">Learning Curve</span>:
          Developers familiar with the traditional structural directives need to learn the new syntax.
        </li>
        <li>
          <span class="text-zinc-50 tw-font-medium">Codebase Migration</span>:
          Existing applications may require significant effort to migrate from structural directives to the new control flow blocks.
        </li>
      </ul>
    </li>
    <li>
      <strong>Compatibility Considerations</strong>
      <ul class="list-disc pl-4">
        <li>
          <span class="text-zinc-50 tw-font-medium">Library Support</span>:
          Some third-party libraries may not yet fully support or integrate well with the new control flow syntax.
        </li>
        <li>
          <span class="text-zinc-50 tw-font-medium">Mixed Syntax</span>:
          During migration, applications may have a mix of both syntaxes, which can lead to inconsistency.
        </li>
      </ul>
    </li>
    <li>
      <strong>Testing Adjustments</strong>
      <ul class="list-disc pl-4">
        <li>
          <span class="text-zinc-50 tw-font-medium">Updated Testing Patterns</span>:
          Testing strategies and helpers designed for structural directives may need updates to work properly with control flow blocks.
        </li>
      </ul>
    </li>
  </ol>

  <br>

  <p>
    Summary Comparison
  </p>
  <table class="w-full border-collapse rounded-lg overflow-hidden shadow-md">
    <thead>
      <tr class="bg-gray-800 text-gray-100">
        <th class="py-3 px-4 text-left">Aspect</th>
        <th class="py-3 px-4 text-left">Built-in Control Flow</th>
        <th class="py-3 px-4 text-left">Structural Directives</th>
      </tr>
    </thead>
    <tbody>
      <tr class="border-b border-gray-700 bg-gray-900 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">Performance</td>
        <td class="py-3 px-4">Generally faster with smaller bundle size</td>
        <td class="py-3 px-4">Less optimized, especially in complex templates</td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-950 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">Syntax</td>
        <td class="py-3 px-4">Cleaner and more intuitive</td>
        <td class="py-3 px-4">More verbose, especially for complex logic</td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-900 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">Type Safety</td>
        <td class="py-3 px-4">Better TypeScript integration</td>
        <td class="py-3 px-4">Limited type checking in templates</td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-950 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">Legacy Support</td>
        <td class="py-3 px-4">New feature, requires Angular 17+</td>
        <td class="py-3 px-4">Supported in all Angular versions</td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-900 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">Ecosystem</td>
        <td class="py-3 px-4">Growing support in newer libraries</td>
        <td class="py-3 px-4">Well-established with wide library support</td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-950 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4">Future Direction</td>
        <td class="py-3 px-4">Angular's recommended approach going forward</td>
        <td class="py-3 px-4">Will be maintained but deprecated in future versions</td>
      </tr>
    </tbody>
  </table>
</ng-template>

<ng-template #topicsRef>
  <ol class="list-decimal px-10 text-sm">
    <li>
      <strong>Performance Optimization</strong>
      <ul class="list-disc pl-4">
        <li>
          <strong class="text-sky-400">Description</strong>:
          Built-in control flow is designed to be more performant than structural directives, with improved change detection and rendering speed.
        </li>
        <li>
          <strong class="text-sky-400">Relation to Performance</strong>:
          The control flow blocks are compiled differently than structural directives, resulting in smaller bundle sizes and faster rendering times.
        </li>
      </ul>
    </li>
    <li>
      <strong>Template Syntax</strong>
      <ul class="list-disc pl-4">
        <li>
          <strong class="text-sky-400">Description</strong>:
          Built-in control flow introduces a new syntax for writing templates in Angular, moving away from attribute-based directives to block-based structures.
        </li>
        <li>
          <strong class="text-sky-400">Relation to Templates</strong>:
          The new syntax provides a more intuitive way to write conditions and loops in templates, closer to how they would be written in TypeScript.
        </li>
      </ul>
    </li>
    <li>
      <strong>Ahead-of-Time (AOT) Compilation</strong>
      <ul class="list-disc pl-4">
        <li>
          <strong class="text-sky-400">Description</strong>:
          AOT compilation is a process where Angular templates are compiled during the build process rather than at runtime.
        </li>
        <li>
          <strong class="text-sky-400">Relation to Control Flow</strong>:
          Built-in control flow is optimized for AOT compilation, allowing for more aggressive optimizations and smaller bundle sizes.
        </li>
      </ul>
    </li>
    <li>
      <strong>Lazy Loading</strong>
      <ul class="list-disc pl-4">
        <li>
          <strong class="text-sky-400">Description</strong>:
          Lazy loading is a technique where parts of an application are loaded only when needed, improving initial load times.
        </li>
        <li>
          <strong class="text-sky-400">Relation to Control Flow</strong>:
          The &#64;defer block in the control flow syntax provides a built-in way to lazily load parts of a template, integrating well with other control flow blocks.
        </li>
      </ul>
    </li>
    <li>
      <strong>Server-Side Rendering (SSR)</strong>
      <ul class="list-disc pl-4">
        <li>
          <strong class="text-sky-400">Description</strong>:
          SSR is a technique where Angular applications are pre-rendered on the server before being sent to the client.
        </li>
        <li>
          <strong class="text-sky-400">Relation to Control Flow</strong>:
          Built-in control flow works well with SSR, providing better hydration support and more predictable rendering.
        </li>
      </ul>
    </li>
  </ol>

  <br>

  <p>Angular 19 Updates for Built-in Control Flow</p>
  <ul class="list-disc pl-4 text-sm">
    <li>
      <strong>Full Stability</strong>:
      Built-in control flow is now fully stable and recommended for all production applications.
    </li>
    <li>
      <strong>Performance Enhancements</strong>:
      Significant performance improvements over the developer preview in Angular 17, with better change detection and rendering speed.
    </li>
    <li>
      <strong>Enhanced Type Safety</strong>:
      Improved TypeScript integration for better type checking and autocomplete support.
    </li>
    <li>
      <strong>Migration Tools</strong>:
      Improved migration tools to help convert existing structural directives to control flow blocks.
    </li>
    <li>
      <strong>Better Error Messages</strong>:
      More helpful error messages and debugging support for control flow blocks.
    </li>
    <li>
      <strong>IDE Support</strong>:
      Enhanced IDE support with better syntax highlighting and autocomplete suggestions.
    </li>
  </ul>
</ng-template>
