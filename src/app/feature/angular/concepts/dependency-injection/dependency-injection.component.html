<section class="p-4 text-sm">
  <p class="heading-1 mb-2">
    Dependency Injection (DI)
  </p>

  <div class="text-content">
    <p>
      <span class="text-zinc-50 tw-font-medium">Dependency Injection (DI)</span>
      in Angular 19 is a design pattern and core mechanism for creating and delivering parts of an application (dependencies) to other parts that require them. Angular 19 enhances DI with improved performance, simplified providers, and better integration with the signals architecture.
    </p>

    <br>

    <div class="flex flex-col">
      <div class="flex border-b border-gray-200">
        <button  (click)="selectedTab = 1" [class.text-rose-300]="selectedTab===1" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Notes
        </button>
        <button  (click)="selectedTab = 2" [class.text-rose-300]="selectedTab===2" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Best Practices
        </button>
        <button  (click)="selectedTab = 3" [class.text-rose-300]="selectedTab===3" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Pros and Cons
        </button>
        <button  (click)="selectedTab = 4" [class.text-rose-300]="selectedTab===4" class="text-sky-400 hover:text-rose-400 font-semibold py-2 px-4 border-b-2 border-transparent hover:border-gray-500 focus:outline-none">
          Related Topics
        </button>
      </div>
      <div class="p-4">
        <ng-container [ngSwitch]="selectedTab">
          <div *ngSwitchCase="2">
            <ng-container *ngTemplateOutlet="bestRef;"></ng-container>
          </div>
          <div *ngSwitchCase="3">
            <ng-container *ngTemplateOutlet="prosConsRef;"></ng-container>
          </div>
          <div *ngSwitchCase="4">
            <ng-container *ngTemplateOutlet="topicsRef"></ng-container>
          </div>
          <div *ngSwitchDefault>
            <ng-container *ngTemplateOutlet="notesRef"></ng-container>
          </div>
        </ng-container>
      </div>
    </div>
  </div>
</section>



<ng-template #notesRef>
  <p>
    Core Dependency Injection Concepts in Angular 19:
  </p>

  <br>

  <ol class="list-decimal px-10 text-sm">
    <li>
      <strong>Providers</strong> - Define the dependencies that are injected into components, directives, and services. In Angular 19, providers can be declared at the component, standalone component, or application level.

      <button (click)="code1.hidden = !code1.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

      <span #code1 hidden copyToClipboard>
        <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
          <span>typescript</span>
          <span class="copy-button-wrapper bg-gray-700"></span>
        </div>

        <pre>
          <code
            [highlight]="code_1"
            [languages]="['typescript']">
          </code>
        </pre>
      </span>

    </li>
    <li>
      <strong>Injectors</strong> - Responsible for providing dependencies to components and services. Angular 19 optimizes injector hierarchies for better performance with standalone components.

      <button (click)="code2.hidden = !code2.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

      <span #code2 hidden copyToClipboard>
        <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
          <span>typescript</span>
          <span class="copy-button-wrapper bg-gray-700"></span>
        </div>

        <pre>
          <code
            [highlight]="code_2"
            [languages]="['typescript']">
          </code>
        </pre>
      </span>

    </li>
    <li>
      <strong>Services</strong> - Provide reusable functionality to components and other services. In Angular 19, services integrate seamlessly with signals for reactive state management.

      <button (click)="code3.hidden = !code3.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

      <span #code3 hidden copyToClipboard>
        <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
          <span>typescript</span>
          <span class="copy-button-wrapper bg-gray-700"></span>
        </div>

        <pre>
          <code
            [highlight]="code_3"
            [languages]="['typescript']">
          </code>
        </pre>
      </span>

    </li>
    <li>
      <strong>Injectable</strong> - A decorator that marks a class as injectable and provides metadata that the injector uses to resolve dependencies.

      <button (click)="code4.hidden = !code4.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

      <span #code4 hidden copyToClipboard>
        <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
          <span>typescript</span>
          <span class="copy-button-wrapper bg-gray-700"></span>
        </div>

        <pre>
          <code
            [highlight]="code_4"
            [languages]="['typescript']">
          </code>
        </pre>
      </span>

    </li>
    <li>
      <strong>Tokens</strong> - Unique identifiers used by the injector to resolve dependencies. Angular 19 expands token types with better type safety.

      <button (click)="code5.hidden = !code5.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

      <span #code5 hidden copyToClipboard>
        <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
          <span>typescript</span>
          <span class="copy-button-wrapper bg-gray-700"></span>
        </div>

        <pre>
          <code
            [highlight]="code_5"
            [languages]="['typescript']">
          </code>
        </pre>
      </span>

    </li>
    <li>
      <strong>Factory providers</strong> - Allow for custom logic to be used when creating dependencies. Angular 19 simplifies factory providers with improved type inference.

      <button (click)="code6.hidden = !code6.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

      <span #code6 hidden copyToClipboard>
        <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
          <span>typescript</span>
          <span class="copy-button-wrapper bg-gray-700"></span>
        </div>

        <pre>
          <code
            [highlight]="code_6"
            [languages]="['typescript']">
          </code>
        </pre>
      </span>


    </li>
    <li>
      <strong>Value providers</strong> - Allow for simple, static values to be injected as dependencies. Angular 19 adds better type checking for value providers.

      <button (click)="code7.hidden = !code7.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

      <span #code7 hidden copyToClipboard>
        <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
          <span>typescript</span>
          <span class="copy-button-wrapper bg-gray-700"></span>
        </div>

        <pre>
          <code
            [highlight]="code_7"
            [languages]="['typescript']">
          </code>
        </pre>
      </span>


    </li>
    <li>
      <strong>Optional dependencies</strong> - Dependencies that are not required by a component or service can be marked as optional using the &#64;Optional decorator.

      <button (click)="code8.hidden = !code8.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

      <span #code8 hidden copyToClipboard>
        <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
          <span>typescript</span>
          <span class="copy-button-wrapper bg-gray-700"></span>
        </div>

        <pre>
          <code
            [highlight]="code_8"
            [languages]="['typescript']">
          </code>
        </pre>
      </span>

    </li>
    <li>
      <strong>Injection tokens</strong> - Unique identifiers that can be used to resolve dependencies. Angular 19 improves injection token type inference.

      <button (click)="code9.hidden = !code9.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

      <span #code9 hidden copyToClipboard>
        <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
          <span>typescript</span>
          <span class="copy-button-wrapper bg-gray-700"></span>
        </div>

        <pre>
          <code
            [highlight]="code_9"
            [languages]="['typescript']">
          </code>
        </pre>
      </span>

    </li>
    <li>
      <strong>Hierarchical injection</strong> - Allows for dependencies to be inherited by child components and services. Angular 19 optimizes this for standalone components.

      <button (click)="code10.hidden = !code10.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

      <span #code10 hidden copyToClipboard>
        <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
          <span>typescript</span>
          <span class="copy-button-wrapper bg-gray-700"></span>
        </div>

        <pre>
          <code
            [highlight]="code_10"
            [languages]="['typescript']">
          </code>
        </pre>
      </span>

    </li>
  </ol>

  <br>
  <br>

  <p>New Dependency Injection Features in Angular 19</p>
  <ol class="list-decimal px-10 text-sm">
    <li>
      <strong>Signal-based Injection</strong> - Angular 19 introduces a new way to inject dependencies that integrates with the signals architecture for better reactivity and performance.

      <button (click)="code11.hidden = !code11.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

      <span #code11 hidden copyToClipboard>
        <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
          <span>typescript</span>
          <span class="copy-button-wrapper bg-gray-700"></span>
        </div>

        <pre>
          <code
            [highlight]="'// Using the new inject function in a component\n&#64;Component({\n  selector: \'app-user-profile\',\n  template: \'<div>Welcome, {{userName()}}</div>\',\n  standalone: true\n})\nexport class UserProfileComponent {\n  private userService = inject(UserService);\n  userName = computed(() => this.userService.getCurrentUser().name);\n}'"
            [languages]="['typescript']">
          </code>
        </pre>
      </span>
    </li>
    <li>
      <strong>Improved providedIn options</strong> - Angular 19 expands the providedIn options for better tree-shaking and scope control.

      <button (click)="code12.hidden = !code12.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

      <span #code12 hidden copyToClipboard>
        <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
          <span>typescript</span>
          <span class="copy-button-wrapper bg-gray-700"></span>
        </div>

        <pre>
          <code
            [highlight]="'&#64;Injectable({\n  providedIn: \'platform\' // Available across multiple Angular applications\n})\nexport class SharedService {\n  // Service implementation\n}'"
            [languages]="['typescript']">
          </code>
        </pre>
      </span>
    </li>
    <li>
      <strong>Standalone-friendly providers</strong> - Angular 19 fully stabilizes the standalone API for DI, making it easier to use without NgModules.

      <button (click)="code13.hidden = !code13.hidden" class="border border-rose-400 rounded-md px-1 text-sky-400">code</button>

      <span #code13 hidden copyToClipboard>
        <div class="flex flex-row justify-between items-center bg-gray-900 px-4 py-2 relative top-5">
          <span>typescript</span>
          <span class="copy-button-wrapper bg-gray-700"></span>
        </div>

        <pre>
          <code
            [highlight]="'// Providing services to standalone components\n&#64;Component({\n  selector: \'app-feature\',\n  template: \'...\',\n  standalone: true,\n  providers: [FeatureService]\n})\nexport class FeatureComponent {\n  constructor(private featureService: FeatureService) {}\n}'"
            [languages]="['typescript']">
          </code>
        </pre>
      </span>
    </li>
  </ol>

  <br>
  <br>

  <p>Dependency Injection Usage in Angular 19</p>
  <table class="w-full border-collapse rounded-lg overflow-hidden shadow-md">
    <thead>
      <tr class="bg-gray-800 text-gray-100">
        <th class="py-3 px-4 text-left">Approach</th>
        <th class="py-3 px-4 text-left">Use Case</th>
      </tr>
    </thead>
    <tbody>
      <tr class="border-b border-gray-700 bg-gray-900 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4"><code>constructor injection</code></td>
        <td class="py-3 px-4">Traditional approach, works with all services and components</td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-950 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4"><code>inject() function</code></td>
        <td class="py-3 px-4">Modern approach, better with signals and standalone components</td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-900 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4"><code>providedIn: 'root'</code></td>
        <td class="py-3 px-4">Application-wide singleton services</td>
      </tr>
      <tr class="border-b border-gray-700 bg-gray-950 hover:bg-gray-800 transition-colors">
        <td class="py-3 px-4"><code>Component providers</code></td>
        <td class="py-3 px-4">Component-scoped services that follow component lifecycle</td>
      </tr>
    </tbody>
  </table>
</ng-template>

<ng-template #bestRef>
  <ol class="list-decimal px-4 text-sm">
    <li>
      <strong class="text-sky-400">Use the inject() Function in Angular 19</strong>
      <ul class="list-disc pl-4">
        <li>
          <strong>Prefer inject() over Constructor Injection</strong>:
          In Angular 19, use the inject() function instead of constructor injection for better code organization and compatibility with the signals architecture.
        </li>
        <li>
          <strong>Combine with Signal Features</strong>:
          Leverage inject() with computed() to create reactive dependencies that automatically update when underlying data changes.
        </li>
      </ul>
    </li>
    <li>
      <strong class="text-sky-400">Optimize Provider Scope</strong>:
      <ul class="list-disc pl-4">
        <li>
          <strong>Use providedIn Strategically</strong>:
          In Angular 19, carefully select the appropriate providedIn option ('root', 'platform', 'any') to optimize tree-shaking and performance.
        </li>
        <li>
          <strong>Leverage Standalone Components</strong>:
          Use component-level providers with standalone components to create isolated dependency trees that are more maintainable and testable.
        </li>
      </ul>
    </li>
    <li>
      <strong class="text-sky-400">Design Services for Testability</strong>:
      <ul class="list-disc pl-4">
        <li>
          <strong>Use Interfaces for Dependencies</strong>:
          Define interfaces for your services and use injection tokens to provide more flexibility when testing.
        </li>
        <li>
          <strong>Create Mock Services</strong>:
          Develop mock implementations for your services to make testing easier and more reliable.
        </li>
      </ul>
    </li>
    <li>
      <strong class="text-sky-400">Embrace Hierarchical Injection</strong>:
      <ul class="list-disc pl-4">
        <li>
          <strong>Use Component Providers</strong>:
          Leverage component providers to create service instances tied to component lifecycles, which helps prevent memory leaks.
        </li>
        <li>
          <strong>Understand Injector Hierarchies</strong>:
          Learn how Angular's injector hierarchy works to avoid unexpected behavior with shared services.
        </li>
      </ul>
    </li>
  </ol>
</ng-template>

<ng-template #prosConsRef>
  <strong class="text-sky-400">
    Pros of Angular 19's Dependency Injection:
  </strong>

  <ol class="list-decimal px-4 text-sm">
    <li>
      <strong>Improved Performance</strong>
      <ul class="list-disc pl-4">
        <li>
          Angular 19 optimizes the dependency injection system for better startup time and runtime performance.
        </li>
      </ul>
    </li>
    <li>
      <strong>Better Integration with Signals</strong>
      <ul class="list-disc pl-4">
        <li>
          The DI system in Angular 19 works seamlessly with signals for reactive state management.
        </li>
      </ul>
    </li>
    <li>
      <strong>Enhanced Type Safety</strong>
      <ul class="list-disc pl-4">
        <li>
          Angular 19 improves type inference for injected dependencies, reducing runtime errors.
        </li>
      </ul>
    </li>
    <li>
      <strong>Simplified Module-less Development</strong>
      <ul class="list-disc pl-4">
        <li>
          With full support for standalone components, Angular 19's DI system works without requiring NgModules.
        </li>
      </ul>
    </li>
  </ol>

  <br>

  <strong class="text-sky-400">
    Cons and Challenges:
  </strong>

  <ol class="list-decimal px-4 text-sm">
    <li>
      <strong>Learning Curve</strong>
      <ul class="list-disc pl-4">
        <li>
          Understanding Angular's DI system, particularly with the new signal-based approach, can be challenging for newcomers.
        </li>
      </ul>
    </li>
    <li>
      <strong>Multiple Injection Methods</strong>
      <ul class="list-disc pl-4">
        <li>
          Having both constructor injection and the inject() function can lead to inconsistent code patterns in large teams.
        </li>
      </ul>
    </li>
    <li>
      <strong>Migration Complexity</strong>
      <ul class="list-disc pl-4">
        <li>
          Migrating from older Angular versions to Angular 19's dependency injection patterns can require significant refactoring.
        </li>
      </ul>
    </li>
    <li>
      <strong>Debugging Complexity</strong>
      <ul class="list-disc pl-4">
        <li>
          Hierarchical injection can sometimes make it difficult to track where a service instance is coming from, especially in complex applications.
        </li>
      </ul>
    </li>
  </ol>
</ng-template>

<ng-template #topicsRef>
  <p>Related Angular 19 Topics:</p>
  <ol class="list-decimal px-4 text-sm">
    <li>
      <strong>Signals Framework</strong>:
      <p>
        Angular 19's signals architecture integrates deeply with the dependency injection system, enabling reactive programming patterns without RxJS.
      </p>
    </li>
    <li>
      <strong>Standalone Components</strong>:
      <p>
        Angular 19 fully stabilizes standalone components with their own provider system, reducing the need for NgModules.
      </p>
    </li>
    <li>
      <strong>Zoneless Applications</strong>:
      <p>
        Angular 19's zoneless applications rely on signal-based dependency injection for change detection without zone.js.
      </p>
    </li>
    <li>
      <strong>Server-Side Rendering (SSR)</strong>:
      <p>
        Angular 19 enhances the dependency injection system for better server-side rendering performance and hydration.
      </p>
    </li>
    <li>
      <strong>Environment Injection</strong>:
      <p>
        Angular 19 improves environment-specific configuration injection for better development, testing, and production management.
      </p>
    </li>
  </ol>
</ng-template>

